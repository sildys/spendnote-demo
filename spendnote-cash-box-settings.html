<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Cash Box settings in SpendNote.">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" type="image/x-icon" href="favicon.ico">
    <title>Cash Box Settings - SpendNote</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/main.css?v=4">
    <link rel="stylesheet" href="assets/css/app-layout.css?v=5">
    <style>
        /* ===== CASH BOX SETTINGS PAGE SPECIFIC STYLES ===== */
        
        /* PRO BADGE */
        .pro-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            background: white;
            border: 2px solid #f59e0b;
            color: #f59e0b;
            font-size: 11px;
            font-weight: 800;
            letter-spacing: 0.05em;
            border-radius: 8px;
            text-transform: uppercase;
        }
        
        /* SETTINGS SECTIONS */
        .settings-container {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .settings-section {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 28px;
            box-shadow: 0 2px 16px var(--shadow);
        }
        
        /* RECEIPTS SECTION - two column layout */
        .receipts-layout {
            display: grid;
            grid-template-columns: 1fr 600px;
            gap: 24px;
        }
        
        @media (max-width: 1400px) {
            .receipts-layout {
                grid-template-columns: 1fr;
                gap: 24px;
            }
            
            .receipt-preview-panel {
                position: relative;
                top: 0;
                order: -1;
            }
        }
        
        .receipts-settings {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .receipt-preview-panel {
            background: var(--surface-elevated);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            position: sticky;
            top: 100px;
            max-height: calc(100vh - 120px);
            display: flex;
            flex-direction: column;
        }
        
        .preview-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        
        .preview-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .preview-title i {
            color: var(--active);
        }
        
        .zoom-controls {
            display: flex;
            gap: 4px;
            align-items: center;
        }
        
        .zoom-btn {
            width: 32px;
            height: 32px;
            border: 1px solid var(--border);
            background: var(--surface);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text);
            font-size: 14px;
        }
        
        .zoom-btn:hover {
            background: var(--surface-elevated);
            border-color: var(--primary);
            color: var(--primary);
        }
        
        .zoom-level {
            font-size: 12px;
            color: var(--text-muted);
            font-weight: 600;
            min-width: 45px;
            text-align: center;
        }
        
        .receipt-preview-container {
            flex: 1;
            overflow: auto;
            border: 1px solid var(--border);
            border-radius: 12px;
            background: white;
            position: relative;
        }
        
        .receipt-preview-wrapper {
            width: 100%;
            display: block;
        }
        
        .receipt-preview-frame {
            width: 100%;
            height: 1400px;
            border: none;
            background: white;
            display: block;
            zoom: 0.7;
            transition: zoom 0.2s ease;
        }
        
        /* Mock Receipt Preview */
        .receipt-preview-mock {
            background: white;
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            max-height: 520px;
            overflow-y: auto;
        }
        
        .mock-receipt {
            font-size: 12px;
            color: var(--text);
            line-height: 1.5;
        }
        
        .mock-logo {
            text-align: center;
            margin-bottom: 8px;
        }
        
        .mock-logo-icon {
            width: 40px;
            height: 40px;
            background: var(--active);
            color: white;
            border-radius: 10px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 18px;
        }
        
        .mock-company {
            text-align: center;
            font-size: 14px;
            margin-bottom: 4px;
        }
        
        .mock-address {
            text-align: center;
            color: var(--text-muted);
            font-size: 11px;
            margin-bottom: 12px;
        }
        
        .mock-divider {
            border-top: 1px dashed var(--border);
            margin: 12px 0;
        }
        
        .mock-title {
            text-align: center;
            font-weight: 800;
            font-size: 14px;
            letter-spacing: 1px;
            margin-bottom: 4px;
        }
        
        .mock-id {
            text-align: center;
            color: var(--text-muted);
            font-size: 11px;
            margin-bottom: 12px;
        }
        
        .mock-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
        }
        
        .mock-label {
            color: var(--text-muted);
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .mock-Contact {
            margin-bottom: 12px;
        }
        
        .mock-amount {
            display: flex;
            justify-content: space-between;
            font-size: 16px;
            padding: 10px 0;
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
            margin: 12px 0;
        }
        
        .mock-amount strong {
            color: var(--active);
        }
        
        .mock-txid, .mock-note {
            margin-bottom: 8px;
            font-size: 11px;
        }
        
        .mock-signatures {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-top: 20px;
        }
        
        .mock-sig {
            flex: 1;
            text-align: center;
        }
        
        .mock-sig-line {
            border-top: 1px solid var(--text);
            margin-bottom: 4px;
            margin-top: 30px;
        }
        
        .mock-sig span {
            font-size: 10px;
            color: var(--text-muted);
        }
        
        /* Hidden state for preview elements */
        .mock-receipt .hidden {
            display: none !important;
        }
        
        @media (max-width: 900px) {
            .receipts-layout {
                grid-template-columns: 1fr;
            }
            .receipt-preview-panel {
                position: static;
            }
        }

        .section-header {
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }

        .section-title {
            font-size: 18px;
            font-weight: 800;
            color: var(--text);
            margin-bottom: 6px;
        }

        .section-description {
            font-size: 13px;
            color: var(--text-muted);
        }

        /* FORM ELEMENTS */
        .form-group {
            margin-bottom: 16px;
        }

        .form-group:last-child {
            margin-bottom: 0;
        }

        .form-row-2col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 16px;
        }

        .form-row-2col .form-group {
            margin-bottom: 0;
        }

        @media (max-width: 600px) {
            .form-row-2col {
                grid-template-columns: 1fr;
            }
        }

        .form-label {
            display: block;
            font-size: 13px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 6px;
        }

        .form-hint {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: 12px;
            font-size: 12px;
            font-family: inherit;
            color: var(--text);
            background: var(--surface);
            transition: all 0.2s;
        }

        .form-input:hover {
            border-color: rgba(0,0,0,0.15);
        }

        .form-input:focus {
            border-color: var(--active);
            outline: none;
            box-shadow: 0 0 0 3px rgba(var(--active-rgb), 0.1);
        }

        .form-input:disabled {
            background: var(--surface-elevated);
            color: var(--text-muted);
            cursor: not-allowed;
        }

        textarea.form-input {
            resize: vertical;
            min-height: 80px;
        }

        .form-select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: 12px;
            font-size: 12px;
            font-family: inherit;
            color: var(--text);
            background: var(--surface);
            cursor: pointer;
            transition: all 0.2s;
        }

        .form-select:hover {
            border-color: rgba(0,0,0,0.15);
        }

        .form-select:focus {
            border-color: var(--active);
            outline: none;
            box-shadow: 0 0 0 3px rgba(var(--active-rgb), 0.1);
        }

        /* WARNING BOX */
        .warning-box {
            display: flex;
            gap: 12px;
            padding: 14px 16px;
            background: rgba(245, 158, 11, 0.05);
            border: 1px solid rgba(245, 158, 11, 0.2);
            border-radius: 12px;
            margin-top: 12px;
        }

        .warning-box i {
            color: var(--orange);
            font-size: 18px;
            flex-shrink: 0;
        }

        .warning-text {
            font-size: 14px;
            color: var(--text);
            line-height: 1.5;
        }

        .warning-box.hidden {
            display: none;
        }

        /* COLOR PALETTE */
        .color-palette {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }

        .color-option {
            aspect-ratio: 1;
            border-radius: 12px;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .color-option:hover {
            transform: scale(1.05);
        }

        .color-option.selected {
            border-color: var(--text);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .color-option.selected::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: 900;
            font-size: 20px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* ICON PICKER */
        .icon-palette {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }

        .icon-option {
            aspect-ratio: 1;
            border-radius: 12px;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            background: var(--surface);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--text-muted);
        }

        .icon-option:hover {
            transform: scale(1.05);
            border-color: var(--active);
            color: var(--active);
        }

        .icon-option.selected {
            border-color: var(--active);
            border-width: 3px;
            background: rgba(var(--active-rgb), 0.05);
            color: var(--active);
            box-shadow: 0 4px 12px rgba(var(--active-rgb), 0.2);
        }

        /* TOGGLE SWITCHES */
        .toggle-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .toggle-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
        }

        .toggle-label {
            font-size: 12px;
            color: var(--text);
            font-weight: 500;
        }

        .toggle-switch {
            position: relative;
            width: 48px;
            height: 28px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--border);
            border-radius: 28px;
            transition: 0.3s;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            border-radius: 50%;
            transition: 0.3s;
        }

        .toggle-switch input:checked + .toggle-slider {
            background-color: #059669;
        }

        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(20px);
        }

        .toggle-switch input:disabled + .toggle-slider {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* TEMPLATE SELECTOR */
        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 12px;
        }

        .template-card {
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s;
            background: var(--surface);
        }

        .template-card:hover {
            border-color: var(--active);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .template-card.selected {
            border-color: var(--active);
            background: rgba(var(--active-rgb), 0.02);
        }

        .template-preview {
            width: 100%;
            aspect-ratio: 3/4;
            background: var(--surface-elevated);
            border-radius: 8px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: var(--text-muted);
        }

        .template-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
            text-align: center;
        }

        /* FORMAT CARDS (Receipts section) */
        .format-cards {
            display: flex;
            flex-direction: row;
            gap: 8px;
        }

        .format-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 10px 12px;
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            flex: 1;
            text-align: center;
        }

        .format-card:hover {
            border-color: var(--active);
            background: rgba(var(--active-rgb), 0.02);
        }

        .format-card.active {
            border-color: var(--active);
            background: rgba(var(--active-rgb), 0.05);
            box-shadow: 0 2px 8px rgba(var(--active-rgb), 0.15);
        }

        .format-icon {
            width: 28px;
            height: 28px;
            border-radius: 8px;
            background: rgba(var(--active-rgb), 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: var(--active);
            flex-shrink: 0;
        }

        .format-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .format-name {
            font-size: 12px;
            font-weight: 700;
            color: var(--text);
            line-height: 1.2;
        }

        .format-desc {
            font-size: 10px;
            color: var(--text-muted);
            line-height: 1.2;
            display: none;
        }

        /* RECEIPT TOGGLES */
        .receipt-toggles {
            display: flex;
            flex-direction: column;
            background: var(--surface-elevated);
            border-radius: 14px;
            overflow: hidden;
        }

        .receipt-toggle-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 18px;
            border-bottom: 1px solid var(--border);
        }

        .receipt-toggle-item:last-child {
            border-bottom: none;
        }

        .receipt-toggle-item .toggle-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
        }

        /* UPGRADE BADGE */
        .upgrade-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 6px;
            font-size: 11px;
            font-weight: 700;
            color: var(--orange);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-left: 8px;
        }

        /* TEAM ACCESS - Compact */
        .team-access-compact {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
        }

        .team-avatars {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .team-avatar-small {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--surface);
            box-shadow: 0 0 0 1px var(--border);
            transition: all 0.2s;
            cursor: pointer;
        }

        .team-avatar-small:hover {
            transform: scale(1.1);
            z-index: 1;
        }

        .team-count {
            font-size: 13px;
            color: var(--text-muted);
            font-weight: 600;
            margin-left: 4px;
        }

        .team-manage-link {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            color: var(--text);
            text-decoration: none;
            transition: all 0.2s;
        }

        .team-manage-link:hover {
            border-color: var(--active);
            color: var(--active);
        }

        .team-manage-link i {
            font-size: 12px;
        }

        /* TEAM ACCESS - Collapsible */
        .team-access-collapsible {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px 20px;
        }

        .team-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .team-header:hover {
            opacity: 0.8;
        }

        .team-members-compact {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .team-member-row {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .team-avatar-mini {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--border);
        }

        .team-info-mini {
            flex: 1;
        }

        .team-name-mini {
            font-size: 13px;
            font-weight: 600;
            color: var(--text);
        }

        .team-role-mini {
            font-size: 11px;
            color: var(--text-muted);
        }

        /* DANGER ZONE */
        .danger-zone {
            background: rgba(239, 68, 68, 0.08);
            border: 2px solid rgba(239, 68, 68, 0.4);
        }

        .danger-button {
            padding: 12px 20px;
            border: 2px solid var(--red);
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            color: var(--red);
            background: transparent;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .danger-button:hover {
            background: var(--red);
            color: white;
        }

        .danger-button i {
            margin-right: 8px;
        }

        /* SAVE BUTTON */
        .save-actions {
            width: 100%;
            padding: 20px 0;
            background: var(--surface);
            border-top: 1px solid var(--border);
            position: sticky;
            bottom: 0;
            z-index: 50;
            box-shadow: 0 -4px 16px rgba(0, 0, 0, 0.08);
        }

        .save-actions-inner {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        .btn-small {
            padding: 10px 16px;
            font-size: 14px;
            border-radius: 10px;
        }
        .inline-cta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            margin-top: 14px;
            padding-top: 14px;
            border-top: 1px dashed var(--border);
        }
        .inline-cta .cta-text {
            font-size: 13px;
            color: var(--text-muted);
            line-height: 1.4;
        }
        .inline-cta a</style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" /></head>
<body>
<nav class="site-nav">
  <div class="nav-container">
            <a href="dashboard.html" class="logo">
                <svg width="36" height="36" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 6 C10 4.89543 10.8954 4 12 4 L36 4 C37.1046 4 38 4.89543 38 6 L38 38 L36 40 L34 38 L32 40 L30 38 L28 40 L26 38 L24 40 L22 38 L20 40 L18 38 L16 40 L14 38 L12 40 L10 38 Z" fill="url(#nav-logo-gradient)"/>
                    <path d="M32 4 L38 10 L32 10 Z" fill="#000000" opacity="0.25"/>
                    <path d="M32 4 L32 10 L38 10" stroke="#047857" stroke-width="1.5" stroke-linejoin="round"/>
                    <line x1="14" y1="14" x2="30" y2="14" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.9"/>
                    <line x1="14" y1="19" x2="26" y2="19" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.8"/>
                    <line x1="14" y1="24" x2="30" y2="24" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.9"/>
                    <line x1="14" y1="29" x2="22" y2="29" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.7"/>
                    <path d="M10 36 L12 38 L14 36 L16 38 L18 36 L20 38 L22 36 L24 38 L26 36 L28 38 L30 36 L32 38 L34 36 L36 38 L38 36" stroke="#047857" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    <defs>
                        <linearGradient id="nav-logo-gradient" x1="24" y1="4" x2="24" y2="40" gradientUnits="userSpaceOnUse">
                            <stop offset="0%" stop-color="#059669"/>
                            <stop offset="100%" stop-color="#10b981"/>
                        </linearGradient>
                    </defs>
                </svg>
                <span>SpendNote</span>
            </a>
            <ul class="nav-links">
                <li><a href="dashboard.html" class="nav-cash-item">Dashboard</a></li>
                <li><a href="spendnote-cash-box-list.html" class="nav-cash-item" id="navCashBoxes">Cash Boxes</a></li>
                <li><a href="spendnote-transaction-history.html" class="nav-cash-item" id="navTransactions">Transactions</a></li>
                <li><a href="spendnote-contact-list.html">Contacts</a></li>
                <li><button class="nav-new-transaction-btn" id="addTransactionBtn"><i class="fas fa-plus"></i> New Transaction</button></li>
                <li class="user-avatar-wrapper" id="userAvatarBtn">
                    <div class="user-avatar">
                        <img src="https://i.pravatar.cc/150?img=12" alt="User">
                    </div>
                    <span class="user-name">John</span>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="user-dropdown-menu">
                            <a href="spendnote-user-settings.html" class="user-dropdown-item">
                                <i class="fas fa-cog"></i>
                                Settings
                            </a>
                            <div class="user-dropdown-divider"></div>
                            <a href="index.html" class="user-dropdown-item">
                                <i class="fas fa-sign-out-alt"></i>
                                Log out
                            </a>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <div class="app-container">
        <main class="main-content">
            <!-- PAGE HEADER -->
            <div class="page-header">
                <h1 class="page-title">Cash Box Settings</h1>
                <p class="page-subtitle">Configure Main Office (CR-001)</p>
            </div>

            <!-- TEAM ACCESS - Collapsible -->
        <div class="team-access-collapsible" style="margin-bottom: 24px;">
            <div class="team-header" onclick="toggleTeamAccess()" style="cursor: pointer;">
                <div style="display: flex; align-items: center; gap: 8px;">
                    <i class="fas fa-users" style="color: var(--text-muted);"></i>
                    <span style="font-size: 14px; font-weight: 600; color: var(--text);">Team Access</span>
                    <span class="pro-badge"><i class="fas fa-crown"></i> PRO</span>
                    <span style="font-size: 13px; color: var(--text-muted);">(3 members)</span>
                </div>
                <i class="fas fa-chevron-down" id="teamToggleIcon" style="transition: transform 0.3s; color: var(--text-muted); font-size: 12px;"></i>
            </div>
            <div class="team-content" id="teamContent" style="display: none; padding-top: 12px;">
                <div class="team-members-compact">
                    <div class="team-member-row">
                        <img src="https://i.pravatar.cc/150?img=12" alt="John Doe" class="team-avatar-mini">
                        <div class="team-info-mini">
                            <div class="team-name-mini">John Doe</div>
                            <div class="team-role-mini">Owner</div>
                        </div>
                    </div>
                    <div class="team-member-row">
                        <img src="https://i.pravatar.cc/150?img=5" alt="Jane Smith" class="team-avatar-mini">
                        <div class="team-info-mini">
                            <div class="team-name-mini">Jane Smith</div>
                            <div class="team-role-mini">Admin</div>
                        </div>
                    </div>
                    <div class="team-member-row">
                        <img src="https://i.pravatar.cc/150?img=8" alt="Mike Johnson" class="team-avatar-mini">
                        <div class="team-info-mini">
                            <div class="team-name-mini">Mike Johnson</div>
                            <div class="team-role-mini">Viewer</div>
                        </div>
                    </div>
                </div>
                <a href="spendnote-user-settings.html?tab=team" style="display: inline-flex; align-items: center; gap: 6px; margin-top: 12px; font-size: 13px; font-weight: 600; color: var(--active); text-decoration: none;">
                    <i class="fas fa-cog" style="font-size: 11px;"></i>
                    Manage in Settings
                </a>
            </div>
        </div>

        <!-- SETTINGS SECTIONS -->
        <div class="settings-container">
            <!-- GENERAL -->
            <section class="settings-section">
                <div class="section-header">
                    <h2 class="section-title">General</h2>
                    <p class="section-description">Basic information about this Cash Box</p>
                </div>

                <div style="display: grid; grid-template-columns: 2fr 1.5fr 1fr; gap: 20px; margin-bottom: 16px;">
                    <div class="form-group">
                        <label class="form-label">Cash Box name</label>
                        <input type="text" class="form-input" value="Main Office" placeholder="e.g., Main Office">
                        <p class="form-hint">Appears on receipts and dashboard</p>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Currency</label>
                        <select class="form-select" id="currencySelect">
                            <option value="USD" selected>USD ($)</option>
                            <option value="EUR">EUR (€)</option>
                            <option value="GBP">GBP (£)</option>
                            <option value="HUF">HUF (Ft)</option>
                            <option value="JPY">JPY (¥)</option>
                            <option value="CAD">CAD ($)</option>
                            <option value="AUD">AUD ($)</option>
                            <option value="CHF">CHF</option>
                        </select>
                        <p class="form-hint">Transaction currency</p>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            ID Prefix
                            <span class="upgrade-badge">
                                <i class="fas fa-crown"></i>
                                Pro
                            </span>
                        </label>
                        <input type="text" class="form-input" value="REC-" placeholder="e.g., INV-" maxlength="10">
                        <p class="form-hint">Receipt ID format</p>
                    </div>
                </div>

                <div class="warning-box hidden" id="currencyWarning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div class="warning-text">
                        <strong>Changing currency affects existing data.</strong><br>
                        This Cash Box has 47 transactions. Changing currency won't convert amounts — balances will display in the new currency symbol.
                    </div>
                </div>

            </section>

            <!-- APPEARANCE -->
            <section class="settings-section">
                <div class="section-header">
                    <h2 class="section-title">Appearance</h2>
                    <p class="section-description">Customize the accent color for this Cash Box</p>
                </div>

                <div class="form-group">
                    <label class="form-label">Accent color</label>
                    <p class="form-hint" style="margin-bottom: 12px;">This color appears in indicators and highlights (not in balances)</p>
                    
                    <div class="color-palette">
                        <div class="color-option selected" style="background: #059669;" data-color="#059669"></div>
                        <div class="color-option" style="background: #3b82f6;" data-color="#3b82f6"></div>
                        <div class="color-option" style="background: #f59e0b;" data-color="#f59e0b"></div>
                        <div class="color-option" style="background: #8b5cf6;" data-color="#8b5cf6"></div>
                        <div class="color-option" style="background: #ec4899;" data-color="#ec4899"></div>
                        <div class="color-option" style="background: #14b8a6;" data-color="#14b8a6"></div>
                        <div class="color-option" style="background: #f97316;" data-color="#f97316"></div>
                        <div class="color-option" style="background: #06b6d4;" data-color="#06b6d4"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Cash Box icon (appearance only)</label>
                    <p class="form-hint" style="margin-bottom: 12px;">Choose an icon to represent this Cash Box</p>
                    
                    <div class="icon-palette">
                        <div class="icon-option selected" data-icon="building">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="icon-option" data-icon="store">
                            <i class="fas fa-store"></i>
                        </div>
                        <div class="icon-option" data-icon="calendar">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="icon-option" data-icon="wallet">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="icon-option" data-icon="bullhorn">
                            <i class="fas fa-bullhorn"></i>
                        </div>
                        <div class="icon-option" data-icon="dollar">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="icon-option" data-icon="home">
                            <i class="fas fa-home"></i>
                        </div>
                        <div class="icon-option" data-icon="briefcase">
                            <i class="fas fa-briefcase"></i>
                        </div>
                        <div class="icon-option" data-icon="chart">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="icon-option" data-icon="star">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="icon-option" data-icon="flag">
                            <i class="fas fa-flag"></i>
                        </div>
                        <div class="icon-option" data-icon="heart">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="icon-option" data-icon="bolt">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="icon-option" data-icon="gift">
                            <i class="fas fa-gift"></i>
                        </div>
                        <div class="icon-option" data-icon="tag">
                            <i class="fas fa-tag"></i>
                        </div>
                        <div class="icon-option" data-icon="bell">
                            <i class="fas fa-bell"></i>
                        </div>
                    </div>
                </div>
            </section>

            <!-- RECEIPTS -->
            <section class="settings-section">
                <div class="section-header">
                    <h2 class="section-title">Receipts</h2>
                    <p class="section-description">Default receipt settings for this Cash Box</p>
                </div>

                <div class="receipts-layout">
                    <!-- LEFT: Settings -->
                    <div class="receipts-settings">
                        <!-- DEFAULT FORMAT -->
                        <div class="form-group">
                            <label class="form-label">Default format</label>
                            <p class="form-hint" style="margin-bottom: 12px;">When you click "Save & Print", this format will be used</p>
                            <div class="format-cards">
                                <div class="format-card active" data-format="a4">
                                    <div class="format-icon">
                                        <i class="fas fa-copy"></i>
                                    </div>
                                    <div class="format-info">
                                        <div class="format-name">Print (2 copies)</div>
                                        <div class="format-desc">One for you, one for recipient</div>
                                    </div>
                                </div>
                                <div class="format-card" data-format="pdf">
                                    <div class="format-icon">
                                        <i class="fas fa-file-pdf"></i>
                                    </div>
                                    <div class="format-info">
                                        <div class="format-name">PDF Receipt</div>
                                        <div class="format-desc">Download as PDF file</div>
                                    </div>
                                </div>
                                <div class="format-card" data-format="email">
                                    <div class="format-icon">
                                        <i class="fas fa-envelope"></i>
                                    </div>
                                    <div class="format-info">
                                        <div class="format-name">Email Receipt</div>
                                        <div class="format-desc">Send to recipient</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- FIELDS TO SHOW -->
                        <div class="form-group">
                            <label class="form-label">Fields to show</label>
                            <p class="form-hint" style="margin-bottom: 12px;">Amount, Date, and Payer/Receiver names are always shown</p>
                            
                            <div class="receipt-toggles">
                                <div class="receipt-toggle-item">
                                    <span class="toggle-label">Show Logo</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked data-field="logo">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div class="receipt-toggle-item">
                                    <span class="toggle-label">Show Addresses</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked data-field="addresses">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div class="receipt-toggle-item">
                                    <span class="toggle-label">Show Tracking Details</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked data-field="tracking">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div class="receipt-toggle-item">
                                    <span class="toggle-label">Show Additional Info</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked data-field="additional">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div class="receipt-toggle-item">
                                    <span class="toggle-label">Show Note</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked data-field="note">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div class="receipt-toggle-item">
                                    <span class="toggle-label">Show Signatures</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked data-field="signatures">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- CUSTOMIZE RECEIPT TEXT (PRO) -->
                        <div class="form-group">
                            <label class="form-label">
                                Customize Receipt Text
                                <span class="upgrade-badge">
                                    <i class="fas fa-crown"></i> Pro
                                </span>
                            </label>
                            <p class="form-hint" style="margin-bottom: 16px;">Customize the text labels and messages on your receipts</p>
                            
                            <!-- CASH BOX LOGO UPLOAD -->
                            <div style="margin-bottom: 24px; padding: 16px; background: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0;">
                                <label class="form-label" style="font-size: 13px; margin-bottom: 6px;">
                                    Cash Box Logo
                                    <span class="upgrade-badge" style="font-size: 10px; padding: 2px 6px;">
                                        <i class="fas fa-crown"></i> Pro
                                    </span>
                                </label>
                                <p class="form-hint" style="font-size: 12px; margin-bottom: 12px;">Override the default logo for receipts from this Cash Box. Leave empty to use your account logo.</p>
                                
                                <div style="display: flex; align-items: center; gap: 16px;">
                                    <!-- Logo Preview -->
                                    <div id="logoPreview" style="display: none; width: 64px; height: 64px; border: 2px solid #e2e8f0; border-radius: 8px; overflow: hidden; background: white;">
                                        <img id="logoPreviewImg" src="" alt="Logo preview" style="width: 100%; height: 100%; object-fit: contain;">
                                    </div>
                                    
                                    <!-- Upload Controls -->
                                    <div style="flex: 1;">
                                        <input type="file" id="cashBoxLogoInput" accept="image/png,image/jpeg,image/jpg,image/svg+xml" style="display: none;">
                                        <button type="button" class="btn btn-secondary" id="uploadLogoBtn" style="margin-right: 8px;">
                                            <i class="fas fa-upload"></i> Upload Logo
                                        </button>
                                        <button type="button" class="btn btn-outline" id="removeLogoBtn" style="display: none;">
                                            <i class="fas fa-trash"></i> Remove
                                        </button>
                                        <p class="form-hint" style="font-size: 11px; margin-top: 8px;">PNG, JPG, SVG. Max 2MB.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                                <div>
                                    <label class="form-label" style="font-size: 13px; margin-bottom: 6px;">Receipt title</label>
                                    <input type="text" class="form-input" id="receiptTitle" placeholder="Cash Receipt">
                                    <p class="form-hint" style="font-size: 12px; margin-top: 4px;">The main heading on your receipt</p>
                                </div>
                                <div>
                                    <label class="form-label" style="font-size: 13px; margin-bottom: 6px;">Total label</label>
                                    <input type="text" class="form-input" id="totalLabel" placeholder="Total handed over">
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                                <div>
                                    <label class="form-label" style="font-size: 13px; margin-bottom: 6px;">From label</label>
                                    <input type="text" class="form-input" id="fromLabel" placeholder="FROM">
                                </div>
                                <div>
                                    <label class="form-label" style="font-size: 13px; margin-bottom: 6px;">To label</label>
                                    <input type="text" class="form-input" id="toLabel" placeholder="TO">
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                                <div>
                                    <label class="form-label" style="font-size: 13px; margin-bottom: 6px;">Description label</label>
                                    <input type="text" class="form-input" id="descriptionLabel" placeholder="Description">
                                </div>
                                <div>
                                    <label class="form-label" style="font-size: 13px; margin-bottom: 6px;">Amount label</label>
                                    <input type="text" class="form-input" id="amountLabel" placeholder="Amount">
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                                <div>
                                    <label class="form-label" style="font-size: 13px; margin-bottom: 6px;">Note label</label>
                                    <input type="text" class="form-input" id="notesLabel" placeholder="Notes">
                                </div>
                                <div></div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                                <div>
                                    <label class="form-label" style="font-size: 13px; margin-bottom: 6px;">Issued by label</label>
                                    <input type="text" class="form-input" id="issuedByLabel" placeholder="Issued by">
                                </div>
                                <div>
                                    <label class="form-label" style="font-size: 13px; margin-bottom: 6px;">Received by label</label>
                                    <input type="text" class="form-input" id="receivedByLabel" placeholder="Received by">
                                </div>
                            </div>
                            
                            <div>
                                <label class="form-label" style="font-size: 13px; margin-bottom: 6px;">Footer note</label>
                                <textarea class="form-input" id="footerNote" placeholder="e.g., Thank you for your business!" rows="3"></textarea>
                                <p class="form-hint" style="font-size: 12px; margin-top: 4px;">Custom message printed on every receipt</p>
                            </div>
                            
                            <!-- Upgrade CTA hidden for testing -->
                            <div style="margin-top: 16px; padding: 12px; background: #f8f9fa; border-radius: 8px; text-align: center; display: none;">
                                <p style="margin: 0 0 8px 0; font-size: 13px; color: #666;">
                                    <i class="fas fa-lock" style="margin-right: 4px;"></i>
                                    Upgrade to Pro to customize receipt text
                                </p>
                                <button class="btn btn-primary" style="padding: 6px 16px; font-size: 13px;">
                                    <i class="fas fa-crown"></i> Upgrade to Pro
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- RIGHT: Preview -->
                    <div class="receipt-preview-panel">
                        <div class="preview-header">
                            <div class="preview-title">
                                <i class="fas fa-eye"></i>
                                Live Preview
                            </div>
                            <div class="zoom-controls">
                                <button class="zoom-btn" onclick="zoomOut()" title="Zoom Out">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <span class="zoom-level" id="zoomLevel">70%</span>
                                <button class="zoom-btn" onclick="zoomIn()" title="Zoom In">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <button class="zoom-btn" onclick="resetZoom()" title="Reset Zoom">
                                    <i class="fas fa-redo"></i>
                                </button>
                            </div>
                        </div>
                        <!-- RECEIPT PREVIEW IFRAME -->
                        <div class="receipt-preview-container">
                            <div class="receipt-preview-wrapper" id="receiptWrapper">
                                <iframe id="receiptFrame" class="receipt-preview-frame" src="spendnote-receipt-a4-two-copies.html"></iframe>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- DANGER ZONE -->
            <section class="settings-section danger-zone">
                <div class="section-header">
                    <h2 class="section-title">Danger Zone</h2>
                    <p class="section-description">Permanent actions that cannot be undone</p>
                </div>

                <div class="form-group">
                    <button class="danger-button" id="deleteButton">
                        <i class="fas fa-trash"></i>
                        Request Cash Box deletion
                    </button>
                    <p class="form-hint">This will permanently delete this Cash Box and all 47 transactions. This action cannot be undone.</p>
                </div>
            </section>
        </div>
    </div>

    <!-- SAVE ACTIONS -->
    <div class="save-actions">
        <div class="save-actions-inner">
            <button class="btn btn-secondary">Cancel</button>
            <button class="btn btn-primary">Save Changes</button>
        </div>
    </div>

    <!-- Modern 2-Row Footer -->
<footer class="app-footer">
    <div class="app-footer-container">
        <!-- Top Row -->
        <div class="app-footer-top">
            <!-- Brand Section with Disclaimer -->
            <div class="app-footer-brand">
                <a href="dashboard.html" class="app-footer-brand-logo">
                    <svg width="32" height="32" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <!-- Main body with subtle gray pattern -->
                        <path d="M10 6 C10 4.89543 10.8954 4 12 4 L36 4 C37.1046 4 38 4.89543 38 6 L38 38 L36 40 L34 38 L32 40 L30 38 L28 40 L26 38 L24 40 L22 38 L20 40 L18 38 L16 40 L14 38 L12 40 L10 38 Z" fill="white"/>
                        <!-- Folded corner - darker gray -->
                        <path d="M32 4 L38 10 L32 10 Z" fill="rgba(0,0,0,0.15)"/>
                        <!-- Folded corner outline -->
                        <path d="M32 4 L32 10 L38 10" stroke="rgba(0,0,0,0.2)" stroke-width="1.5" stroke-linejoin="round"/>
                        <!-- Receipt lines - light gray -->
                        <line x1="14" y1="14" x2="30" y2="14" stroke="rgba(0,0,0,0.15)" stroke-width="2.5" stroke-linecap="round"/>
                        <line x1="14" y1="19" x2="26" y2="19" stroke="rgba(0,0,0,0.12)" stroke-width="2.5" stroke-linecap="round"/>
                        <line x1="14" y1="24" x2="30" y2="24" stroke="rgba(0,0,0,0.15)" stroke-width="2.5" stroke-linecap="round"/>
                        <line x1="14" y1="29" x2="22" y2="29" stroke="rgba(0,0,0,0.1)" stroke-width="2.5" stroke-linecap="round"/>
                        <!-- Bottom zigzag - gray -->
                        <path d="M10 36 L12 38 L14 36 L16 38 L18 36 L20 38 L22 36 L24 38 L26 36 L28 38 L30 36 L32 38 L34 36 L36 38 L38 36" stroke="rgba(0,0,0,0.2)" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>SpendNote</span>
                </a>
                <p class="app-footer-brand-desc">
                    Cash receipt management for modern teams. Simple, secure, transparent.
                </p>
            </div>
            
            <!-- Right: Links + Disclaimer -->
            <div class="app-footer-right">
                <div class="app-footer-links-simple">
                    <a href="index.html#features">Features</a>
                    <a href="spendnote-pricing.html">Pricing</a>
                    <a href="spendnote-faq.html">FAQ</a>
                    <a href="spendnote-terms.html">Legal</a>
                </div>
                
                <!-- Disclaimer on right side -->
                <div class="app-footer-brand-disclaimer">
                    <i class="fas fa-info-circle"></i>
                    <span>Cash handoff documentation only. Not a tax or accounting tool.</span>
                </div>
            </div>
        </div>
        
        <!-- Bottom Row -->
        <div class="app-footer-bottom">
            <div class="app-footer-copyright">
                2026 SpendNote. All rights reserved.
            </div>
        </div>
    </div>
</footer>








    <script>
        // Currency warning
        const currencySelect = document.getElementById('currencySelect');
        const currencyWarning = document.getElementById('currencyWarning');
        const originalCurrency = currencySelect.value;

        currencySelect.addEventListener('change', function() {
            if (this.value !== originalCurrency) {
                currencyWarning.classList.remove('hidden');
            } else {
                currencyWarning.classList.add('hidden');
            }
        });

        // Color picker
        document.querySelectorAll('.color-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.color-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                this.classList.add('selected');
            });
        });

        // Icon picker
        document.querySelectorAll('.icon-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.icon-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                this.classList.add('selected');
            });
        });

        // Template selector
        document.querySelectorAll('.template-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.template-card').forEach(c => {
                    c.classList.remove('selected');
                });
                this.classList.add('selected');
            });
        });

        // Format card selector (Receipts section)
        document.querySelectorAll('.format-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.format-card').forEach(c => {
                    c.classList.remove('active');
                });
                this.classList.add('active');
            });
        });

        // Receipt preview - track display options
        let displayOptions = {
            logo: '1',
            addresses: '1',
            tracking: '1',
            additional: '1',
            note: '1',
            signatures: '1'
        };

        // Track current format
        let currentFormat = 'a4';

        // Build URL with parameters
        function buildReceiptUrl(format) {
            const baseUrls = {
                'a4': 'spendnote-receipt-a4-two-copies.html',
                'pdf': 'spendnote-pdf-receipt.html',
                'email': 'spendnote-email-receipt.html'
            };
            
            const params = new URLSearchParams();
            for (const [key, value] of Object.entries(displayOptions)) {
                params.append(key, value);
            }
            
            // Add custom text parameters
            const receiptTitle = document.getElementById('receiptTitle')?.value;
            const totalLabel = document.getElementById('totalLabel')?.value;
            const fromLabel = document.getElementById('fromLabel')?.value;
            const toLabel = document.getElementById('toLabel')?.value;
            const descriptionLabel = document.getElementById('descriptionLabel')?.value;
            const amountLabel = document.getElementById('amountLabel')?.value;
            const notesLabel = document.getElementById('notesLabel')?.value;
            const issuedByLabel = document.getElementById('issuedByLabel')?.value;
            const receivedByLabel = document.getElementById('receivedByLabel')?.value;
            const footerNote = document.getElementById('footerNote')?.value;
            
            if (receiptTitle) params.append('receiptTitle', receiptTitle);
            if (totalLabel) params.append('totalLabel', totalLabel);
            if (fromLabel) params.append('fromLabel', fromLabel);
            if (toLabel) params.append('toLabel', toLabel);
            if (descriptionLabel) params.append('descriptionLabel', descriptionLabel);
            if (amountLabel) params.append('amountLabel', amountLabel);
            if (notesLabel) params.append('notesLabel', notesLabel);
            if (issuedByLabel) params.append('issuedByLabel', issuedByLabel);
            if (receivedByLabel) params.append('receivedByLabel', receivedByLabel);
            if (footerNote) params.append('footerNote', footerNote);
            
            return `${baseUrls[format]}?${params.toString()}`;
        }

        // Reload iframe with current settings
        function reloadIframe() {
            const iframe = document.getElementById('receiptFrame');
            if (iframe) {
                iframe.src = buildReceiptUrl(currentFormat);
            }
        }

        // Toggle switches for receipt fields - update iframe in real-time
        document.querySelectorAll('.receipt-toggles input[type="checkbox"]').forEach(toggle => {
            toggle.addEventListener('change', function() {
                const field = this.dataset.field;
                if (field) {
                    // Update display options
                    displayOptions[field] = this.checked ? '1' : '0';
                    // Reload iframe with new settings
                    reloadIframe();
                }
            });
        });

        // Custom text fields - update iframe on input change
        ['receiptTitle', 'totalLabel', 'fromLabel', 'toLabel', 'descriptionLabel', 'amountLabel', 'notesLabel', 'issuedByLabel', 'receivedByLabel', 'footerNote'].forEach(fieldId => {
            const field = document.getElementById(fieldId);
            if (field) {
                field.addEventListener('input', function() {
                    reloadIframe();
                });
            }
        });

        // Format card selector - update preview format
        document.querySelectorAll('.format-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.format-card').forEach(c => {
                    c.classList.remove('active');
                });
                this.classList.add('active');
                
                // Update current format and reload preview
                currentFormat = this.dataset.format;
                reloadIframe();
            });
        });

        // Cash Box Logo Upload functionality
        const logoInput = document.getElementById('cashBoxLogoInput');
        const uploadLogoBtn = document.getElementById('uploadLogoBtn');
        const removeLogoBtn = document.getElementById('removeLogoBtn');
        const logoPreview = document.getElementById('logoPreview');
        const logoPreviewImg = document.getElementById('logoPreviewImg');
        let currentLogoData = null;

        // Upload button click - trigger file input
        if (uploadLogoBtn) {
            uploadLogoBtn.addEventListener('click', function() {
                logoInput.click();
            });
        }

        // Handle file selection
        if (logoInput) {
            logoInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (!file) return;

                // Validate file type
                const validTypes = ['image/png', 'image/jpeg', 'image/jpg', 'image/svg+xml'];
                if (!validTypes.includes(file.type)) {
                    alert('Please upload a PNG, JPG, or SVG file.');
                    return;
                }

                // Validate file size (2MB max)
                const maxSize = 2 * 1024 * 1024; // 2MB in bytes
                if (file.size > maxSize) {
                    alert('File size must be less than 2MB.');
                    return;
                }

                // Read and preview the file
                const reader = new FileReader();
                reader.onload = function(event) {
                    currentLogoData = event.target.result;
                    logoPreviewImg.src = currentLogoData;
                    logoPreview.style.display = 'block';
                    removeLogoBtn.style.display = 'inline-block';
                    
                    // TODO: Save logo data to localStorage or send to backend
                    console.log('Logo uploaded:', file.name);
                };
                reader.readAsDataURL(file);
            });
        }

        // Remove logo
        if (removeLogoBtn) {
            removeLogoBtn.addEventListener('click', function() {
                currentLogoData = null;
                logoPreviewImg.src = '';
                logoPreview.style.display = 'none';
                removeLogoBtn.style.display = 'none';
                logoInput.value = '';
                
                // TODO: Remove logo data from localStorage or backend
                console.log('Logo removed');
            });
        }

        // Initialize iframe on page load
        window.addEventListener('DOMContentLoaded', function() {
            reloadIframe();
            
            // TODO: Load saved logo from localStorage or backend
            // If logo exists, show preview and remove button
        });

        // Zoom functionality
        let currentZoom = 0.7;
        const zoomStep = 0.05;
        const minZoom = 0.6;
        const maxZoom = 1.3;

        function updateZoom() {
            const iframe = document.getElementById('receiptFrame');
            const zoomLevel = document.getElementById('zoomLevel');
            if (iframe && zoomLevel) {
                iframe.style.zoom = currentZoom;
                zoomLevel.textContent = Math.round(currentZoom * 100) + '%';
            }
        }

        function zoomIn() {
            if (currentZoom < maxZoom) {
                currentZoom = Math.min(currentZoom + zoomStep, maxZoom);
                updateZoom();
            }
        }

        function zoomOut() {
            if (currentZoom > minZoom) {
                currentZoom = Math.max(currentZoom - zoomStep, minZoom);
                updateZoom();
            }
        }

        function resetZoom() {
            currentZoom = 0.7;
            updateZoom();
        }

        // Team Management Functions
        function addUser() {
            const email = document.getElementById('newUserEmail').value;
            const role = document.getElementById('newUserRole').value;
            
            if (!email) {
                alert('Please enter an email address');
                return;
            }
            
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address');
                return;
            }
            
            alert(`User ${email} added as ${role} (demo only)`);
            
            // Clear inputs
            document.getElementById('newUserEmail').value = '';
            document.getElementById('newUserRole').value = 'admin';
        }
        
        function removeUser(button) {
            const memberItem = button.closest('.team-member-item');
            const userName = memberItem.querySelector('.team-member-name').textContent;
            
            if (confirm(`Remove ${userName} from this Cash Box?\n\nThey will no longer be able to access this Cash Box.`)) {
                memberItem.style.opacity = '0.5';
                setTimeout(() => {
                    memberItem.remove();
                    alert(`${userName} removed (demo only)`);
                }, 300);
            }
        }

        // Toggle team access
        function toggleTeamAccess() {
            const teamContent = document.getElementById('teamContent');
            const toggleIcon = document.getElementById('teamToggleIcon');
            
            if (teamContent.style.display === 'none') {
                teamContent.style.display = 'block';
                toggleIcon.style.transform = 'rotate(180deg)';
            } else {
                teamContent.style.display = 'none';
                toggleIcon.style.transform = 'rotate(0deg)';
            }
        }

        // Delete confirmation
        document.getElementById('deleteButton').addEventListener('click', function() {
            if (confirm('Are you sure you want to delete "Main Office"?\n\nThis will permanently delete:\n• This Cash Box\n• All 47 transactions\n• All associated data\n\nThis action cannot be undone.')) {
                alert('Cash Box deleted (demo only)');
            }
        });
    </script>
    <script src="assets/js/main.js"></script>
</body>
</html>
