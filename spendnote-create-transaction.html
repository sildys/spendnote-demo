<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Create a new cash transaction in SpendNote.">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" type="image/x-icon" href="favicon.ico">
    <title>Create Transaction - SpendNote</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #059669;
            --primary-light: #10b981;
            --primary-dark: #047857;
            --orange: #f59e0b;
            --blue: #3b82f6;
            --bg: #fafafa;
            --surface: #ffffff;
            --surface-elevated: #f5f5f5;
            --text: #0a0a0a;
            --text-muted: #737373;
            --border: rgba(0,0,0,0.08);
            --shadow: rgba(0,0,0,0.04);
            --error: #ef4444;
            --success: #059669;
            --active: #059669;
            --active-rgb: 5, 150, 105;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        html { overflow-x: clip; }

        *:focus {
            outline: 3px solid var(--active);
            outline-offset: 2px;
        }
        
        body { 
            font-family: 'Inter', -apple-system, system-ui, sans-serif; 
            background: var(--bg);
            color: var(--text); 
            line-height: 1.6; 
            font-size: 15px;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: clip;
        }

/* ===== Imported from landing (nav + footer) ===== */
/* NAV */
        .site-nav {
            position: sticky;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
        }

        .site-nav .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .site-nav .logo {
            display: flex;
            align-items: center;
            gap: 0;
            text-decoration: none;
            transition: transform 0.2s;
        }

        .site-nav .logo:hover {
            transform: scale(1.05);
        }

        .site-nav .logo img {
            height: 36px;
            width: auto;
        }

        .site-nav .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
            list-style: none;
        }

        .site-nav .nav-links a {
            color: #000000;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            transition: color 0.2s;
        }

        .site-nav .nav-links a:hover {
            color: var(--active);
        }

        .site-nav .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 700;
            text-decoration: none;
            transition: all 0.3s;
            display: inline-block;
            font-size: 0.95rem;
            border: none;
            cursor: pointer;
        }

        .site-nav .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            box-shadow: 0 4px 14px rgba(5, 150, 105, 0.3);
        }

        .site-nav .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(5, 150, 105, 0.4);
        }

        .site-nav .btn-secondary {
            background: transparent;
            color: var(--text);
            border: 1px solid var(--border);
        }

        .site-nav .btn-secondary:hover {
            background: rgba(5, 150, 105, 0.05);
            border-color: var(--primary);
        }

        .site-nav .btn-large {
            padding: 1rem 2rem;
            font-size: 1.05rem;
        }

        
/* FOOTER */
        footer {
            background: var(--surface);
            padding: 3rem 2rem 2rem;
            border-top: 1px solid var(--border);
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 3rem;
            margin-bottom: 2rem;
        }

        .footer-brand h3 {
            font-size: 1.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary), var(--primary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
            margin-bottom: 0.75rem;
        }

        .footer-brand p {
            color: #000000;
            line-height: 1.6;
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
        }

        .newsletter-form {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .newsletter-form input {
            flex: 1;
            padding: 0.65rem 1rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.9rem;
            font-family: inherit;
        }

        .newsletter-form button {
            padding: 0.65rem 1.25rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .newsletter-form button:hover {
            transform: translateY(-2px);
        }

        .footer-links h4 {
            margin-bottom: 1rem;
            font-weight: 800;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .footer-links ul {
            list-style: none;
        }

        .footer-links a {
            color: #000000;
            text-decoration: none;
            display: block;
            padding: 0.4rem 0;
            transition: color 0.2s;
            font-size: 0.9rem;
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        .footer-bottom {
            max-width: 1400px;
            margin: 0 auto;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #000000;
            font-size: 0.85rem;
        }

        .footer-social {
            display: flex;
            gap: 0.75rem;
        }

        .footer-social a {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(5, 150, 105, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            transition: all 0.2s;
        }

        .footer-social a:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        

        .site-nav .nav-links a.active {
            color: var(--active);
        }

        .site-nav .nav-links a{
            position: relative;
        }
        .site-nav .nav-links a.active::after{
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            bottom: -10px;
            height: 3px;
            border-radius: 999px;
            background: var(--active);
            opacity: 0.9;
        }

/* ===== End imported ===== */

        /* MAIN */
        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            flex: 1;
            padding: 28px 24px;
            width: 100%;
        }

        .main-content { 
            padding-top: 28px;
            display: flex;
            flex-direction: column;
            gap: 20px; 
        }

        .form-shell {
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
        }

        .form-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 48px;
            box-shadow: 0 4px 24px var(--shadow);
        }

        .form-header {
            margin-bottom: 32px;
            padding: 20px 24px;
            background: linear-gradient(135deg, rgba(var(--active-rgb), 0.1), rgba(var(--active-rgb), 0.05));
            border: 2px solid rgba(var(--active-rgb), 0.15);
            border-radius: 16px;
        }

        .form-title {
            font-size: 28px;
            font-weight: 800;
            letter-spacing: -0.02em;
            margin-bottom: 8px;
            color: var(--active);
        }

        .form-subtitle {
            color: rgba(var(--active-rgb), 0.8);
            font-size: 15px;
            font-weight: 500;
        }

        /* INFO BAR */
        .info-bar {
            background: linear-gradient(135deg, rgba(var(--active-rgb), 0.1), rgba(var(--active-rgb), 0.05));
            border: 2px solid rgba(var(--active-rgb), 0.15);
            border-radius: 16px;
            padding: 16px 20px;
            margin-bottom: 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .info-label {
            color: rgba(var(--active-rgb), 0.8);
            font-weight: 600;
        }

        .info-value {
            color: var(--active);
            font-weight: 700;
        }

        .info-select {
            border: none;
            background: transparent;
            font-weight: 700;
            cursor: pointer;
            padding: 0;
            font-family: inherit;
            font-size: 14px;
            color: var(--active);
        }

        .register-icon-badge {
            width: 32px;
            height: 32px;
            border-radius: 10px;
            background: linear-gradient(135deg, rgba(var(--active-rgb), 0.15), rgba(var(--active-rgb), 0.05));
            border: 2px solid rgba(var(--active-rgb), 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--active);
        }

        /* FORM */
        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 8px;
        }

        .form-label .required {
            color: var(--error);
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 15px;
            font-family: inherit;
            transition: all 0.2s;
            background: var(--surface);
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(5, 150, 105, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-hint {
            font-size: 13px;
            color: var(--text-muted);
            margin-top: 6px;
        }

        /* INPUT WITH BUTTON */
        .input-with-button {
            display: flex;
            gap: 8px;
            align-items: flex-start;
        }

        .input-with-button .form-input {
            flex: 1;
        }

        .add-detail-btn {
            width: 44px;
            height: 44px;
            border: 2px solid var(--border);
            background: var(--surface);
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            color: var(--text-muted);
            flex-shrink: 0;
        }

        .add-detail-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(5, 150, 105, 0.05);
        }

        .add-detail-btn.active {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(5, 150, 105, 0.1);
        }

        /* EXPANDED FIELDS */
        .expanded-fields {
            display: none;
            margin-top: 12px;
            padding: 16px;
            background: var(--bg);
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .expanded-fields.show {
            display: block;
        }

        .expanded-field {
            margin-bottom: 16px;
        }

        .expanded-field:last-child {
            margin-bottom: 0;
        }

        .expanded-field label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-muted);
            margin-bottom: 6px;
        }

        /* DIRECTION TOGGLE */
        .direction-toggle {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .direction-option {
            position: relative;
        }

        .direction-option input[type="radio"] {
            position: absolute;
            opacity: 0;
            pointer-events: none;
        }

        .direction-label {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 16px;
            border: 2px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            background: var(--surface);
            text-align: center;
        }

        .direction-icon {
            font-size: 16px;
            color: var(--text-muted);
            transition: all 0.2s;
        }

        .direction-text {
            font-size: 14px;
            font-weight: 700;
            color: var(--text);
        }

        /* IN = GREEN FILLED */
        .direction-option:has(#directionIn) input:checked + .direction-label {
            border-color: var(--primary);
            background: var(--primary);
        }

        .direction-option:has(#directionIn) input:checked + .direction-label .direction-icon,
        .direction-option:has(#directionIn) input:checked + .direction-label .direction-text {
            color: white;
        }

        /* OUT = ORANGE FILLED */
        .direction-option:has(#directionOut) input:checked + .direction-label {
            border-color: #f59e0b;
            background: #f59e0b;
        }

        .direction-option:has(#directionOut) input:checked + .direction-label .direction-icon,
        .direction-option:has(#directionOut) input:checked + .direction-label .direction-text {
            color: white;
        }

        .direction-label:hover {
            border-color: var(--text-muted);
        }

        /* AMOUNT INPUT */
        .input-with-prefix {
            position: relative;
        }

        .input-prefix {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-weight: 700;
            font-size: 18px;
            pointer-events: none;
        }

        .input-with-prefix input {
            padding-left: 36px;
            font-size: 18px;
            font-weight: 600;
        }

        /* LINE ITEMS */
        .line-items-container {
            margin-top: 12px;
        }

        .line-item {
            display: grid;
            grid-template-columns: 1fr auto auto;
            gap: 12px;
            align-items: center;
            margin-bottom: 12px;
        }

        .line-item-input {
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 14px;
            font-family: inherit;
        }

        .line-item-amount {
            width: 120px;
        }

        .remove-item-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: transparent;
            color: var(--text-muted);
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .remove-item-btn:hover {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
        }

        .add-line-item-btn {
            padding: 10px 16px;
            border: 2px dashed var(--border);
            background: transparent;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
            width: 100%;
            font-family: inherit;
        }

        .add-line-item-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(5, 150, 105, 0.05);
        }

        .add-line-item-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ADD SECTION BUTTON */
        .add-section-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 16px;
            border: 2px dashed var(--border);
            background: transparent;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
            font-family: inherit;
            margin-bottom: 16px;
        }

        .add-section-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(5, 150, 105, 0.05);
        }

        .add-section-btn.active {
            border-style: solid;
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(5, 150, 105, 0.08);
        }

        /* ACTIONS */
        .form-actions {
            display: flex;
            gap: 12px;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid var(--border);
        }

        .btn {
            padding: 14px 24px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            font-family: inherit;
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
            flex: 1;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);
        }

        .btn-blue {
            background: #64748b;
            color: white;
        }

        .btn-blue:hover {
            background: #475569;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(100, 116, 139, 0.3);
        }

        .btn-secondary {
            background: var(--text);
            color: white;
        }

        .btn-secondary:hover {
            background: #171717;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .btn-tertiary {
            background: white;
            color: var(--text);
            border: 2px solid var(--border);
        }

        .btn-tertiary:hover {
            border-color: var(--text);
            background: var(--bg);
            transform: translateY(-1px);
        }

        .btn-tertiary i {
            color: #ef4444;
        }

        /* RESPONSIVE */
        @media (max-width: 640px) {
            .form-card {
                padding: 32px 24px;
            }

            .info-bar {
                flex-direction: column;
                align-items: flex-start;
            }

            .direction-toggle {
                grid-template-columns: 1fr;
            }

            .line-item {
                grid-template-columns: 1fr;
            }

            .line-item-amount {
                width: 100%;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
</head>
<body>
<nav class="site-nav">
  <div class="nav-container">
            <a href="index.html" class="logo">
                <svg width="36" height="36" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 6 C10 4.89543 10.8954 4 12 4 L36 4 C37.1046 4 38 4.89543 38 6 L38 38 L36 40 L34 38 L32 40 L30 38 L28 40 L26 38 L24 40 L22 38 L20 40 L18 38 L16 40 L14 38 L12 40 L10 38 Z" fill="url(#nav-logo-gradient)"/>
                    <path d="M32 4 L38 10 L32 10 Z" fill="#000000" opacity="0.25"/>
                    <path d="M32 4 L32 10 L38 10" stroke="#047857" stroke-width="1.5" stroke-linejoin="round"/>
                    <line x1="14" y1="14" x2="30" y2="14" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.9"/>
                    <line x1="14" y1="19" x2="26" y2="19" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.8"/>
                    <line x1="14" y1="24" x2="30" y2="24" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.9"/>
                    <line x1="14" y1="29" x2="22" y2="29" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.7"/>
                    <path d="M10 36 L12 38 L14 36 L16 38 L18 36 L20 38 L22 36 L24 38 L26 36 L28 38 L30 36 L32 38 L34 36 L36 38 L38 36" stroke="#047857" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    <defs>
                        <linearGradient id="nav-logo-gradient" x1="24" y1="4" x2="24" y2="40" gradientUnits="userSpaceOnUse">
                            <stop offset="0%" stop-color="#059669"/>
                            <stop offset="100%" stop-color="#10b981"/>
                        </linearGradient>
                    </defs>
                </svg>
                <span style="font-weight: 900; font-size: 1.5rem; margin-left: 10px; color: #000000; letter-spacing: -0.02em;">SpendNote</span>
            </a>
            <ul class="nav-links">
                <li><a href="spendnote-dashboard.html">Dashboard</a></li>
                <li><a href="spendnote-register-list.html">Cash Registers</a></li>
                <li><a href="spendnote-transaction-history.html" class="active">Transactions</a></li>
                <li><a href="spendnote-partner-list.html">Partners</a></li>
                <li><a href="spendnote-user-settings.html">Settings</a></li>
                <li><a href="spendnote-login.html" class="btn btn-secondary">Log out</a></li>
            </ul>
        </div>
    </nav>

    <!-- MAIN -->
    <div class="app-container">
        <main class="main-content">
        <div class="form-shell">
            <div class="form-card">
            <div class="form-header">
                <h1 class="form-title">Create Transaction</h1>
                <p class="form-subtitle">Record a cash in or cash out transaction</p>
            </div>

            <!-- INFO BAR -->
            <div class="info-bar">
                <div class="info-item">
                    <i class="fas fa-user" style="color: var(--active);"></i>
                    <span class="info-label">Logged by:</span>
                    <span class="info-value">John Doe</span>
                </div>
                <div class="info-item">
                    <div class="register-icon-badge">
                        <i class="fas fa-building" style="font-size: 16px;"></i>
                    </div>
                    <span class="info-label">Register:</span>
                    <select class="info-value info-select" id="register">
                        <option value="main" data-color="#059669" data-rgb="5, 150, 105">Main Office</option>
                        <option value="event" data-color="#f59e0b" data-rgb="245, 158, 11">Event Fund</option>
                        <option value="petty" data-color="#3b82f6" data-rgb="59, 130, 246">Petty Cash</option>
                    </select>
                </div>
            </div>

            <form id="transactionForm">
                <!-- PARTNER NAME -->
                <div class="form-group">
                    <label class="form-label">Partner name <span class="required">*</span></label>
                    <div class="input-with-button">
                        <input 
                            type="text" 
                            class="form-input" 
                            id="partnerName"
                            placeholder="Enter partner name"
                            required
                        >
                        <button type="button" class="add-detail-btn" id="togglePartnerDetails" title="Add partner details">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    
                    <!-- Expanded partner details -->
                    <div class="expanded-fields" id="partnerDetailsFields">
                        <div class="expanded-field">
                            <label>Address</label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="partnerAddress"
                                placeholder="Street, City, State, ZIP"
                            >
                        </div>
                        <div class="expanded-field">
                            <label>Partner ID</label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="partnerId"
                                placeholder="Tax ID, Client ID, etc."
                            >
                        </div>
                    </div>
                </div>

                <!-- DIRECTION -->
                <div class="form-group">
                    <label class="form-label">Transaction direction <span class="required">*</span></label>
                    <div class="direction-toggle">
                        <div class="direction-option">
                            <input type="radio" name="direction" id="directionIn" value="in" checked>
                            <label for="directionIn" class="direction-label">
                                <div class="direction-icon">⬇</div>
                                <div class="direction-text">IN (Received)</div>
                            </label>
                        </div>
                        <div class="direction-option">
                            <input type="radio" name="direction" id="directionOut" value="out">
                            <label for="directionOut" class="direction-label">
                                <div class="direction-icon">⬆</div>
                                <div class="direction-text">OUT (Paid)</div>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- AMOUNT -->
                <div class="form-group">
                    <label class="form-label">Amount <span class="required">*</span></label>
                    <div class="input-with-prefix">
                        <span class="input-prefix">$</span>
                        <input 
                            type="number" 
                            class="form-input" 
                            id="amount"
                            placeholder="0.00"
                            step="0.01"
                            min="0"
                            required
                        >
                    </div>
                </div>

                <!-- LINE ITEMS -->
                <div class="form-group">
                    <label class="form-label">Line items (optional)</label>
                    <div class="line-items-container" id="lineItemsContainer">
                        <!-- Line items will be added here -->
                    </div>
                    <button type="button" class="add-line-item-btn" id="addLineItemBtn">
                        <i class="fas fa-plus"></i>
                        Add line item (max 5)
                    </button>
                </div>

                <!-- DATE -->
                <div class="form-group">
                    <label class="form-label">Date <span class="required">*</span></label>
                    <input 
                        type="date" 
                        class="form-input" 
                        id="date"
                        required
                    >
                </div>

                <!-- TRANSACTION ID (Optional button) -->
                <button type="button" class="add-section-btn" id="toggleTransactionId">
                    <i class="fas fa-plus"></i>
                    <span>Add transaction ID (optional)</span>
                </button>
                <div class="form-group" id="transactionIdGroup" style="display: none;">
                    <label class="form-label">Transaction ID</label>
                    <input 
                        type="text" 
                        class="form-input" 
                        id="transactionId"
                        placeholder="PO#, Order#, Invoice#, etc."
                    >
                    <span class="form-hint">Purchase order, order number, invoice reference, etc.</span>
                </div>

                <!-- NOTE (Optional button) -->
                <button type="button" class="add-section-btn" id="toggleNote">
                    <i class="fas fa-plus"></i>
                    <span>Add note (optional)</span>
                </button>
                <div class="form-group" id="noteGroup" style="display: none;">
                    <label class="form-label">Note</label>
                    <textarea 
                        class="form-textarea" 
                        id="note"
                        placeholder="Add any additional notes or comments"
                    ></textarea>
                </div>

                <!-- ACTIONS -->
                <div class="form-actions">
                    <button type="submit" class="btn btn-blue" name="action" value="done">
                        <i class="fas fa-check"></i>
                        Done
                    </button>
                    <button type="submit" class="btn btn-primary" name="action" value="done-receipt">
                        <i class="fas fa-file-pdf"></i>
                        Done & Receipt
                    </button>
                    <button type="button" class="btn btn-tertiary" onclick="window.location.href='/dashboard'">
                        <i class="fas fa-times"></i>
                        Cancel
                    </button>
                </div>
                
                <!-- Receipt Note -->
                <div style="text-align: center; margin-top: 16px; font-size: 13px; color: var(--text-muted); font-style: italic;">
                    You can print a receipt now, or later from the transaction list.
                </div>
            </form>
            </div>
        </div>
        </main>
    </div>

    <script>
        // Set today's date
        document.getElementById('date').valueAsDate = new Date();

        // Register change - update active color
        const registerSelect = document.getElementById('register');
        
        function updateRegisterColor() {
            const selectedOption = registerSelect.options[registerSelect.selectedIndex];
            const color = selectedOption.dataset.color;
            const rgb = selectedOption.dataset.rgb;
            
            if (color && rgb) {
                document.documentElement.style.setProperty('--active', color);
                document.documentElement.style.setProperty('--active-rgb', rgb);
            }
        }
        
        // Set initial color
        updateRegisterColor();
        
        // Update on change
        registerSelect.addEventListener('change', updateRegisterColor);

        // Toggle partner details
        document.getElementById('togglePartnerDetails').addEventListener('click', function() {
            const fields = document.getElementById('partnerDetailsFields');
            const isVisible = fields.classList.contains('show');
            
            if (isVisible) {
                fields.classList.remove('show');
                this.classList.remove('active');
                this.innerHTML = '<i class="fas fa-plus"></i>';
            } else {
                fields.classList.add('show');
                this.classList.add('active');
                this.innerHTML = '<i class="fas fa-minus"></i>';
            }
        });

        // Toggle transaction ID
        document.getElementById('toggleTransactionId').addEventListener('click', function() {
            const group = document.getElementById('transactionIdGroup');
            const isVisible = group.style.display !== 'none';
            
            if (isVisible) {
                group.style.display = 'none';
                this.classList.remove('active');
                this.querySelector('i').className = 'fas fa-plus';
            } else {
                group.style.display = 'block';
                this.classList.add('active');
                this.querySelector('i').className = 'fas fa-minus';
            }
        });

        // Toggle note
        document.getElementById('toggleNote').addEventListener('click', function() {
            const group = document.getElementById('noteGroup');
            const isVisible = group.style.display !== 'none';
            
            if (isVisible) {
                group.style.display = 'none';
                this.classList.remove('active');
                this.querySelector('i').className = 'fas fa-plus';
            } else {
                group.style.display = 'block';
                this.classList.add('active');
                this.querySelector('i').className = 'fas fa-minus';
            }
        });

        // Line items management
        let lineItemCount = 0;
        const maxLineItems = 5;
        const lineItemsContainer = document.getElementById('lineItemsContainer');
        const addLineItemBtn = document.getElementById('addLineItemBtn');

        addLineItemBtn.addEventListener('click', () => {
            if (lineItemCount >= maxLineItems) return;
            
            lineItemCount++;
            const itemDiv = document.createElement('div');
            itemDiv.className = 'line-item';
            itemDiv.innerHTML = `
                <input 
                    type="text" 
                    class="line-item-input" 
                    placeholder="Item description"
                    data-item-index="${lineItemCount}"
                >
                <input 
                    type="number" 
                    class="line-item-input line-item-amount" 
                    placeholder="$0.00"
                    step="0.01"
                    min="0"
                    data-amount-index="${lineItemCount}"
                >
                <button type="button" class="remove-item-btn" data-remove-index="${lineItemCount}">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            lineItemsContainer.appendChild(itemDiv);
            
            // Remove button
            itemDiv.querySelector('.remove-item-btn').addEventListener('click', function() {
                itemDiv.remove();
                lineItemCount--;
                updateLineItemsButton();
            });
            
            updateLineItemsButton();
        });

        function updateLineItemsButton() {
            addLineItemBtn.disabled = lineItemCount >= maxLineItems;
            addLineItemBtn.innerHTML = `
                <i class="fas fa-plus"></i>
                Add line item (${lineItemCount}/${maxLineItems})
            `;
        }

        // Form submission
        document.getElementById('transactionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const actionBtn = e.submitter;
            const action = actionBtn ? actionBtn.value : 'done';
            
            const formData = {
                register: document.getElementById('register').value,
                loggedBy: 'John Doe',
                partnerName: document.getElementById('partnerName').value,
                partnerAddress: document.getElementById('partnerAddress').value,
                partnerId: document.getElementById('partnerId').value,
                direction: document.querySelector('input[name="direction"]:checked').value,
                amount: document.getElementById('amount').value,
                date: document.getElementById('date').value,
                transactionId: document.getElementById('transactionId').value,
                note: document.getElementById('note').value,
                lineItems: []
            };

            // Collect line items
            document.querySelectorAll('.line-item').forEach(item => {
                const desc = item.querySelector('[data-item-index]').value;
                const amt = item.querySelector('[data-amount-index]').value;
                if (desc || amt) {
                    formData.lineItems.push({ description: desc, amount: amt });
                }
            });

            console.log('Transaction data:', formData);
            console.log('Action:', action);
            
            if (action === 'done-receipt') {
                alert('Transaction saved!\n\nGenerating receipt PDF...\n\nIn production:\n- Save to database\n- Generate & download PDF\n- Update register balance');
                // Mock: would generate PDF here
            } else {
                alert('Transaction saved!\n\nIn production:\n- Save to database\n- Update register balance\n- Redirect to dashboard');
            }
            
            // Redirect to dashboard
            // window.location.href = '/dashboard';
        });
    </script>

    <footer>
        <div class="footer-content">
            <div class="footer-brand">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 1rem;">
                    <svg width="32" height="32" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 6 C10 4.89543 10.8954 4 12 4 L36 4 C37.1046 4 38 4.89543 38 6 L38 38 L36 40 L34 38 L32 40 L30 38 L28 40 L26 38 L24 40 L22 38 L20 40 L18 38 L16 40 L14 38 L12 40 L10 38 Z" fill="url(#footer-logo-gradient)"/>
                        <path d="M32 4 L38 10 L32 10 Z" fill="#000000" opacity="0.25"/>
                        <path d="M32 4 L32 10 L38 10" stroke="#047857" stroke-width="1.5" stroke-linejoin="round"/>
                        <line x1="14" y1="14" x2="30" y2="14" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.9"/>
                        <line x1="14" y1="19" x2="26" y2="19" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.8"/>
                        <line x1="14" y1="24" x2="30" y2="24" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.9"/>
                        <line x1="14" y1="29" x2="22" y2="29" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.7"/>
                        <path d="M10 36 L12 38 L14 36 L16 38 L18 36 L20 38 L22 36 L24 38 L26 36 L28 38 L30 36 L32 38 L34 36 L36 38 L38 36" stroke="#047857" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                        <defs>
                            <linearGradient id="footer-logo-gradient" x1="24" y1="4" x2="24" y2="40" gradientUnits="userSpaceOnUse">
                                <stop offset="0%" stop-color="#059669"/>
                                <stop offset="100%" stop-color="#10b981"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <h3 style="margin: 0; font-size: 1.5rem; font-weight: 900; background: linear-gradient(135deg, #047857, #059669, #10b981); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">SpendNote</h3>
                </div>
                <p>Professional cash receipt management for modern teams. Simple, secure, and transparent.</p>
                
                <form class="newsletter-form">
                    <input type="email" placeholder="your@email.com" required>
                    <button type="submit">Subscribe</button>
                </form>
            </div>
            <div class="footer-links">
                <h4>Product</h4>
                <ul>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#pricing">Pricing</a></li>
                    <li><a href="/faq">FAQ</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h4>Company</h4>
                <ul>
                    <li><a href="/about">About</a></li>
                    <li><a href="/blog">Blog</a></li>
                    <li><a href="/contact">Contact</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h4>Legal</h4>
                <ul>
                    <li><a href="/terms">Terms</a></li>
                    <li><a href="/privacy">Privacy</a></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div>
                <p>&copy; 2026 SpendNote. All rights reserved.</p>
                <p style="margin-top: 0.5rem;"><i class="fas fa-info-circle"></i> Proof of cash transfer only. Not a tax or accounting tool.</p>
            </div>
            <div class="footer-social">
                <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
            </div>
        </div>
    </footer>
</body>
</html>
