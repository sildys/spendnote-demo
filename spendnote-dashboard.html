<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SpendNote Dashboard - Manage your cash receipts, transactions, and registers in one place.">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" type="image/x-icon" href="favicon.ico">
    <title>Dashboard - SpendNote</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #059669;
            --primary-light: #10b981;
            --primary-dark: #047857;
            --orange: #f59e0b;
            --blue: #3b82f6;
            --bg: #fafafa;
            --surface: #ffffff;
            --surface-elevated: #f5f5f5;
            --text: #0a0a0a;
            --text-muted: #737373;
            --border: rgba(0,0,0,0.08);
            --shadow: rgba(0,0,0,0.04);
            --error: #ef4444;
            --success: #059669;
            --active: #059669;
            --active-rgb: 5, 150, 105;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        html {
            overflow-x: clip;
        }
        
        body { 
            font-family: 'Inter', -apple-system, system-ui, sans-serif; 
            background: var(--bg);
            color: var(--text); 
            line-height: 1.6; 
            font-size: 15px;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: clip;
        }

        *:focus {
            outline: 3px solid var(--active);
            outline-offset: 2px;
        }

        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            flex: 1;
            padding: 28px 24px;
            width: 100%;
        }

        /* TOP NAV */
        .top-nav {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 16px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            box-shadow: 0 2px 16px var(--shadow);
        }

        /* MODERN LOGO */
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 22px;
            font-weight: 900;
            color: var(--text);
            letter-spacing: -0.03em;
        }
        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);
        }
        .logo-icon::before {
            content: 'S';
            font-size: 22px;
            font-weight: 900;
            color: white;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .logo-icon::after {
            content: '';
            position: absolute;
            width: 18px;
            height: 2px;
            background: white;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 1px;
        }
        .logo-text {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 50%, var(--primary-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .logo img {
            height: 20px;
            width: auto;
        }

        .nav-links { display: flex; gap: 8px; list-style: none; }
        .nav-link {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-muted);
            border-radius: 12px;
            transition: all 0.2s ease;
            font-size: 14px;
            background: transparent;
            border: none;
        }
        .nav-link:hover { color: var(--text); background: var(--surface-elevated); }
        .nav-link.active { color: white; background: var(--active); }
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            background: var(--surface-elevated);
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            border: 1px solid var(--border);
        }

        .main-content { 
            padding-top: 28px;
            display: flex;
            flex-direction: column;
            gap: 20px; 
        }

        /* REGISTER CARDS */
        /* OLD - not used anymore
        .registers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }
        */
        .register-card {
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: 24px;
            padding: 28px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 20px var(--shadow);
        }
        .register-card::before{
            /* Removed gradient wash to keep cards calm */
            content: none;
        }
        .register-card:hover {
            border-color: rgba(var(--active-rgb), 0.4);
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(var(--active-rgb), 0.12);
        }
        .register-card.active {
            border-color: var(--active);
            background: linear-gradient(135deg, #ffffff 0%, rgba(var(--active-rgb), 0.04) 100%);
            box-shadow: 0 8px 32px rgba(var(--active-rgb), 0.15);
        }
        .register-card.active::before { opacity: 0.06; }

        .register-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
        }
        .register-info h3 {
            font-size: 18px;
            font-weight: 800;
            margin-bottom: 6px;
            color: var(--text);
            position: relative;
            padding-left: 18px;
        }
        .register-info h3::before{
            content: '';
            width: 10px;
            height: 10px;
            border-radius: 999px;
            background: var(--card-color, var(--active));
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            box-shadow: 0 0 0 3px rgba(var(--card-rgb, var(--active-rgb)), 0.14);
        }
        .register-id {
            font-size: 12px;
            color: var(--text-muted);
            font-weight: 600;
            font-family: monospace;
            background: var(--surface-elevated);
            padding: 4px 8px;
            border-radius: 6px;
            display: inline-block;
        }
        .register-icon {
            width: 56px;
            height: 56px;
            border-radius: 16px;
            background: linear-gradient(135deg, rgba(var(--active-rgb), 0.1), rgba(var(--active-rgb), 0.05));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--active);
            font-size: 24px;
            border: 1px solid rgba(var(--active-rgb), 0.15);
        }
        .register-balance {
            font-size: 40px;
            font-weight: 900;
            color: var(--text);
            margin-bottom: 8px;
            letter-spacing: -0.04em;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .trend-indicator {
            font-size: 14px;
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 8px;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        .trend-indicator.up { background: rgba(16,185,129,0.12); color: #059669; }
        .trend-indicator.down { background: rgba(239,68,68,0.12); color: #dc2626; }
        .trend-indicator i { font-size: 12px; }

        .register-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        .stat-item {
            background: var(--surface-elevated);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 12px 14px;
            position: relative;
        }

        .tooltip {
            position: absolute;
            bottom: calc(100% + 8px);
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            z-index: 100;
        }
        .tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: rgba(0,0,0,0.9);
        }
        .stat-item:hover .tooltip { opacity: 1; }

        .stat-label {
            font-size: 11px;
            color: var(--text-muted);
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 6px;
            letter-spacing: 0.05em;
        }
        .stat-value {
            font-size: 18px;
            font-weight: 800;
        }
        .stat-value.in { color: #10b981; }
        .stat-value.out { color: #f59e0b; }

        /* CONTEXT ROW */
        .context-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 20px;
        }

        .add-transaction-btn {
            background-color: var(--active);
            background-image: none;
            border: none;
            border-radius: 20px;
            padding: 24px 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
            box-shadow: 0 8px 24px rgba(var(--active-rgb), 0.28);
            position: relative;
        }
        .add-transaction-btn::before { display: none; }
        .add-transaction-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 14px 34px rgba(var(--active-rgb), 0.38);
            filter: brightness(0.96);
        }
        .add-transaction-btn:hover::before { display: none; }
        
            50% { opacity: 0.3; }
        }
        .add-transaction-btn:active {
            transform: translateY(-2px);
            filter: brightness(0.94);
        }
        .add-btn-icon {
            width: 56px;
            height: 56px;
            background: rgba(255,255,255,0.25);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: white;
            font-weight: 900;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .add-btn-text {
            font-size: 20px;
            font-weight: 900;
            color: white;
            line-height: 1.3;
            letter-spacing: -0.02em;
        }

        .context-pill {
            background: linear-gradient(135deg, var(--surface) 0%, rgba(var(--active-rgb), 0.08) 100%);
            border: 2px solid var(--active);
            border-radius: 18px;
            padding: 20px 24px;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: 0 6px 28px rgba(var(--active-rgb), 0.2);
        }
        .context-badge {
            display: flex;
            align-items: center;
            gap: 12px;
            padding-right: 20px;
            border-right: 2px solid var(--border);
            flex-shrink: 0;
        }
        .context-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--active);
            box-shadow: 0 0 20px rgba(var(--active-rgb), 0.6);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.95); }
        }
        .context-text {
            font-size: 15px;
            font-weight: 800;
            color: var(--active);
            white-space: nowrap;
        }
        .context-stats {
            display: flex;
            gap: 20px;
            flex: 1;
            justify-content: space-around;
        }
        .context-stat {
            text-align: center;
            position: relative;
        }
        .context-stat-value {
            font-size: 20px;
            font-weight: 900;
            color: var(--text);
            margin-bottom: 2px;
            letter-spacing: -0.02em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .context-stat-trend {
            font-size: 12px;
            font-weight: 700;
        }
        .context-stat-trend.up { color: #059669; }
        .context-stat-trend.down { color: #dc2626; }
        .context-stat-label {
            font-size: 10px;
            color: var(--text-muted);
            font-weight: 700;
            text-transform: uppercase;
        }

        /* TRANSACTIONS */
        .transactions-card {
            background: var(--surface);
            border: 2px solid rgba(var(--active-rgb), 0.2);
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 6px 28px rgba(var(--active-rgb), 0.12);
        }
        .transactions-header {
            padding: 24px 32px;
            border-bottom: 2px solid rgba(var(--active-rgb), 0.15);
            background: linear-gradient(135deg, var(--surface-elevated) 0%, rgba(var(--active-rgb), 0.04) 100%);
        }
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .transactions-title {
            font-size: 20px;
            font-weight: 800;
            color: var(--text);
        }
        .header-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .filter-toggle-btn {
            padding: 10px 20px;
            background: white;
            color: var(--text);
            border: 1px solid var(--border);
            border-radius: 10px;
            font-weight: 700;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .filter-toggle-btn:hover {
            background: var(--surface-elevated);
            border-color: var(--active);
        }
        .filter-toggle-btn.active {
            background: rgba(var(--active-rgb), 0.1);
            color: var(--active);
            border-color: var(--active);
        }
        .filter-toggle-btn i {
            transition: transform 0.3s;
        }
        .filter-toggle-btn.active i {
            transform: rotate(180deg);
        }

        .export-btn {
            padding: 10px 20px;
            background: var(--active);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .export-btn:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
        }

        .filter-panel-wrapper {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .filter-panel-wrapper.expanded {
            max-height: 400px;
        }

        .filter-panel {
            padding: 20px 32px;
            background: linear-gradient(135deg, rgba(var(--active-rgb), 0.02), transparent);
            border-bottom: 2px solid var(--border);
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 16px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .filter-label {
            font-size: 11px;
            font-weight: 700;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .filter-label i {
            font-size: 10px;
            color: var(--active);
        }
        .filter-input {
            padding: 10px 14px;
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
            background: white;
            transition: all 0.2s;
        }
        .filter-input:focus {
            border-color: var(--active);
            box-shadow: 0 0 0 3px rgba(var(--active-rgb), 0.1);
        }
        .filter-input::placeholder {
            color: var(--text-muted);
            font-weight: 500;
        }

        .amount-range {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        .amount-range input {
            flex: 1;
        }
        .amount-range span {
            color: var(--text-muted);
            font-weight: 700;
        }

        .filter-actions {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }
        .filter-btn {
            padding: 10px 20px;
            border: 1px solid var(--border);
            background: white;
            color: var(--text);
            border-radius: 10px;
            font-weight: 700;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .filter-btn:hover {
            background: var(--surface-elevated);
        }
        .filter-btn.primary {
            background: var(--active);
            color: white;
            border-color: var(--active);
        }
        .filter-btn.primary:hover {
            background: var(--primary-light);
        }
        .filter-btn.clear {
            color: #ef4444;
            border-color: rgba(239,68,68,0.3);
        }
        .filter-btn.clear:hover {
            background: rgba(239,68,68,0.1);
            border-color: #ef4444;
        }

        .filter-tabs {
            display: flex;
            gap: 6px;
            background: white;
            padding: 4px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }
        .filter-tab {
            padding: 8px 18px;
            border: none;
            background: transparent;
            color: var(--text-muted);
            font-weight: 700;
            font-size: 13px;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.2s;
        }
        .filter-tab:hover { 
            color: var(--text);
            background: var(--surface-elevated);
        }
        .filter-tab.active {
            background: var(--active);
            color: white;
        }

        .table-wrapper {
            max-height: 600px;
            overflow-y: auto;
            position: relative;
        }

        .table-grid {
            display: grid;
            grid-template-columns: 40px 50px 50px 90px 1fr 120px 120px 110px 140px 90px;
            gap: 16px;
            padding: 18px 32px;
            align-items: center;
            border-bottom: 1px solid var(--border);
            transition: all 0.2s;
            position: relative;
        }
        .table-grid:hover {
            background: rgba(var(--active-rgb), 0.03);
        }
        .table-grid:hover .row-tooltip { opacity: 1; }
        .table-header {
            font-size: 11px;
            color: var(--text-muted);
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            background: var(--surface-elevated);
            border-bottom: 2px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .table-header:hover { background: var(--surface-elevated); }

        .row-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--active);
        }

        .tx-number {
            font-size: 15px;
            font-weight: 900;
            color: var(--active);
            font-family: monospace;
            text-align: center;
        }

        .row-tooltip {
            position: absolute;
            right: 100px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 10px 14px;
            border-radius: 10px;
            font-size: 12px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            white-space: nowrap;
            z-index: 50;
        }
        .row-tooltip strong { color: #10b981; }

        .tx-icon {
            width: 38px;
            height: 38px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            font-weight: 800;
        }
        .tx-icon.in {
            background: linear-gradient(135deg, rgba(16,185,129,0.15), rgba(16,185,129,0.08));
            color: #059669;
            border: 1px solid rgba(16,185,129,0.2);
        }
        .tx-icon.out {
            background: linear-gradient(135deg, rgba(245,158,11,0.15), rgba(245,158,11,0.08));
            color: #f59e0b;
            border: 1px solid rgba(245,158,11,0.2);
        }
        .tx-receipt {
            font-size: 13px;
            font-weight: 800;
            color: var(--active);
            font-family: monospace;
        }
        .tx-desc {
            font-size: 15px;
            font-weight: 700;
            color: var(--text);
        }
        .tx-person {
            font-size: 13px;
            color: var(--text-muted);
            font-weight: 600;
        }
        .tx-amount {
            font-size: 17px;
            font-weight: 900;
            text-align: right;
        }
        .tx-amount.in { color: #10b981; }
        .tx-amount.out { color: #f59e0b; }
        .tx-datetime {
            font-size: 12px;
            color: var(--text);
            font-weight: 600;
            text-align: left;
        }
        .tx-datetime .date {
            display: block;
            font-weight: 700;
        }
        .tx-datetime .time {
            display: block;
            color: var(--text-muted);
            font-size: 11px;
            font-weight: 600;
        }
        .tx-action {
            padding: 8px 16px;
            background: rgba(var(--active-rgb), 0.1);
            color: var(--active);
            border: 1px solid rgba(var(--active-rgb), 0.2);
            border-radius: 10px;
            font-weight: 800;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .tx-action:hover {
            background: var(--active);
            color: white;
            transform: translateY(-1px);
        }

        .bulk-actions {
            padding: 12px 32px;
            background: rgba(var(--active-rgb), 0.05);
            border-bottom: 2px solid var(--border);
            display: none;
            align-items: center;
            gap: 16px;
        }
        .bulk-actions.active { display: flex; }
        .bulk-actions-text {
            font-size: 14px;
            font-weight: 700;
            color: var(--text);
        }
        .bulk-action-btn {
            padding: 8px 16px;
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-weight: 700;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .bulk-action-btn:hover {
            background: var(--active);
            color: white;
            border-color: var(--active);
        }
        .bulk-action-btn.delete {
            color: #ef4444;
            border-color: #ef4444;
        }
        .bulk-action-btn.delete:hover {
            background: #ef4444;
            color: white;
        }

        .table-wrapper::-webkit-scrollbar { width: 10px; }
        .table-wrapper::-webkit-scrollbar-track { background: var(--surface-elevated); }
        .table-wrapper::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 5px;
        }
        .table-wrapper::-webkit-scrollbar-thumb:hover { background: var(--active); }

        @media (max-width: 1024px) {
            .context-row { grid-template-columns: 1fr; }
            .context-pill { flex-direction: column; gap: 16px; }
            .context-badge { border: none; padding: 0; }
            .filter-grid { grid-template-columns: 1fr; }
        }
    
        /* ===== CAROUSEL STYLES ===== */
        .registers-carousel-section {
            margin-bottom: 30px;
            width: 100%;
            max-width: 100%;
            overflow: hidden;
        }

        .carousel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .carousel-title {
            font-size: 24px;
            font-weight: 700;
            color: #1f2937;
            margin: 0;
        }

        .carousel-nav {
            display: flex;
            gap: 10px;
        }

        .carousel-arrow {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            border: 2px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .carousel-arrow:hover:not(.swiper-button-disabled) {
            border-color: #10b981;
            background: #f0fdf4;
        }

        .carousel-arrow.swiper-button-disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .carousel-arrow i {
            color: #6b7280;
            font-size: 16px;
        }

        /* Swiper overrides */
        .registers-swiper {
            padding: 10px 0 50px 0;
            overflow: hidden;
            width: 100%;
        }
        
        .swiper-wrapper {
            display: flex;
        }

        .swiper-slide {
            height: auto;
        }

        .registers-swiper .register-card {
            margin: 0;
            height: 100%;
            max-width: 100%;
            width: 100%;
        }

        /* Pagination */
        .swiper-pagination {
            bottom: 10px !important;
        }

        .swiper-pagination-bullet {
            width: 8px;
            height: 8px;
            background: #d1d5db;
            opacity: 1;
            transition: all 0.3s ease;
        }

        .swiper-pagination-bullet-active {
            background: #10b981;
            width: 24px;
            border-radius: 4px;
        }

        /* Add Register Button */
        .add-register-container {
            text-align: center;
            margin-top: 20px;
        }

        .add-register-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 14px 28px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(16, 185, 129, 0.2);
        }

        .add-register-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(16, 185, 129, 0.3);
        }

        .add-register-btn i {
            font-size: 18px;
        }


        /* Fix pagination overlap */
        .swiper-pagination {
            bottom: 20px !important;
            position: relative !important;
            margin-top: 20px;
        }

        /* Prevent icon color change on hover */
        .register-card:hover .register-icon i,
        .register-card.active .register-icon i {
            color: inherit;
        }

        
                /* Add New Register Card */
        .add-new-register-card {
            border: 3px dashed #10b981 !important;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%) !important;
            display: flex;
            flex-direction: column;
        }

        .add-new-register-card:hover {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%) !important;
            border-color: #059669 !important;
        }

        .add-new-register-card .register-icon.add-icon {
            background: linear-gradient(135deg, #10b981, #059669) !important;
            color: white !important;
            border: none !important;
        }

        .add-new-register-card .register-top h3 {
            color: #10b981;
        }

        .add-register-message {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
        }

        .add-register-message p {
            color: #6b7280;
            font-size: 16px;
            line-height: 1.6;
            text-align: center;
            max-width: 280px;
        }

        
                /* Responsive */
        @media (max-width: 768px) {
            .logo img {
                height: 18px;
            }
            
            .carousel-title {
                font-size: 20px;
            }
            
            .carousel-nav {
                display: none;
            }
        }

    

/* ===== Imported from landing (nav + footer) ===== */
/* NAV */
        .site-nav {
            position: sticky;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
        }

        .site-nav .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .site-nav .logo {
            display: flex;
            align-items: center;
            gap: 0;
            text-decoration: none;
            transition: transform 0.2s;
        }

        .site-nav .logo:hover {
            transform: scale(1.05);
        }

        .site-nav .logo img {
            height: 36px;
            width: auto;
        }

        .site-nav .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
            list-style: none;
        }

        .site-nav .nav-links a {
            color: #000000;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            transition: color 0.2s;
        }

        .site-nav .nav-links a:hover {
            color: var(--active);
        }

        .site-nav .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 700;
            text-decoration: none;
            transition: all 0.3s;
            display: inline-block;
            font-size: 0.95rem;
            border: none;
            cursor: pointer;
        }

        .site-nav .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            box-shadow: 0 4px 14px rgba(5, 150, 105, 0.3);
        }

        .site-nav .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(5, 150, 105, 0.4);
        }

        .site-nav .btn-secondary {
            background: transparent;
            color: var(--text);
            border: 1px solid var(--border);
        }

        .site-nav .btn-secondary:hover {
            background: rgba(5, 150, 105, 0.05);
            border-color: var(--primary);
        }

        .site-nav .btn-large {
            padding: 1rem 2rem;
            font-size: 1.05rem;
        }

        
/* FOOTER */
        footer {
            background: var(--surface);
            padding: 3rem 2rem 2rem;
            border-top: 1px solid var(--border);
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 3rem;
            margin-bottom: 2rem;
        }

        .footer-brand h3 {
            font-size: 1.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary), var(--primary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
            margin-bottom: 0.75rem;
        }

        .footer-brand p {
            color: #000000;
            line-height: 1.6;
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
        }

        .newsletter-form {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .newsletter-form input {
            flex: 1;
            padding: 0.65rem 1rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.9rem;
            font-family: inherit;
        }

        .newsletter-form button {
            padding: 0.65rem 1.25rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .newsletter-form button:hover {
            transform: translateY(-2px);
        }

        .footer-links h4 {
            margin-bottom: 1rem;
            font-weight: 800;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .footer-links ul {
            list-style: none;
        }

        .footer-links a {
            color: #000000;
            text-decoration: none;
            display: block;
            padding: 0.4rem 0;
            transition: color 0.2s;
            font-size: 0.9rem;
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        .footer-bottom {
            max-width: 1400px;
            margin: 0 auto;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #000000;
            font-size: 0.85rem;
        }

        .footer-social {
            display: flex;
            gap: 0.75rem;
        }

        .footer-social a {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(5, 150, 105, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            transition: all 0.2s;
        }

        .footer-social a:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        

        .site-nav .nav-links a.active {
            color: var(--active);
        }

        .site-nav .nav-links a{
            position: relative;
        }
        .site-nav .nav-links a.active::after{
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            bottom: -10px;
            height: 3px;
            border-radius: 999px;
            background: var(--active);
            opacity: 0.9;
        }

/* ===== End imported ===== */

        /* ===== App topbar enhancements ===== */
        .app-topbar{
            margin: 0 auto;
            max-width: 1400px;
            padding: 18px 20px;
            border: 1px solid var(--border);
            border-radius: 16px;
            background: linear-gradient(180deg, rgba(5, 150, 105, 0.06), rgba(255,255,255,0.9));
            box-shadow: 0 8px 24px rgba(15, 23, 42, 0.06);
        }
        .app-topbar .context-row{
            margin: 0;
        }
        .app-topbar .add-transaction-btn{
            border-radius: 14px;
        }
        .app-topbar .context-pill{
            border-radius: 16px;
            background: rgba(255,255,255,0.85);
        }
        .app-topbar .context-stat-balance .context-stat-value{
            font-size: 1.35rem;
            font-weight: 900;
            letter-spacing: -0.02em;
        }
        .registers-carousel-section{
            margin-top: 14px;
        }
        .carousel-title{
            letter-spacing: -0.02em;
        }
        .carousel-header{
            padding-top: 6px;
        }
        .carousel-subtitle{
            margin-top: 2px;
            font-size: 0.95rem;
            color: var(--text-muted);
        }


        /* ===== Register card kebab menu (settings/delete) ===== */
.register-top{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:14px;
}

.register-header-left{
  display:flex;
  align-items:flex-start;
  gap:12px;
  min-width:0;
}

.register-icon.small{
  width:34px;
  height:34px;
  border-radius:10px;
  flex:0 0 auto;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:14px;
}

.register-info{
  min-width:0;
}

.register-actions{
  position:relative;
  flex:0 0 auto;
}

.register-kebab{
  width:32px;
  height:32px;
  border-radius:10px;
  border:1px solid var(--border);
  background: rgba(148, 163, 184, 0.10);
  color: var(--text-secondary);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition: all .15s ease;
}

.register-kebab:hover{
  background: rgba(148, 163, 184, 0.16);
  color: var(--text);
}

.register-menu{
  position:absolute;
  top: calc(100% + 8px);
  right: 0;
  width: 220px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: var(--shadow);
  padding: 8px;
  display:none;
  z-index: 50;
}

.register-menu.open{ display:block; }

.register-menu button{
  width:100%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px 12px;
  border-radius:10px;
  background:transparent;
  border:0;
  color: var(--text);
  cursor:pointer;
  font-weight:600;
  font-size:14px;
}

.register-menu button:hover{
  background: rgba(148, 163, 184, 0.10);
}

.register-menu .divider{
  height:1px;
  background: var(--border);
  margin: 6px 4px;
}

.register-menu .danger{
  color: var(--danger);
}
.register-menu.open{ display: block; }
        .register-menu button{
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            padding: 12px 14px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-weight: 700;
            font-size: 13px;
            color: var(--text);
        }
        .register-menu button:hover{ background: rgba(var(--active-rgb), 0.06); }
        .register-menu .danger{
            color: #dc2626;
        }
        .register-menu .danger:hover{
            background: rgba(239, 68, 68, 0.08);
        }
        .register-menu .divider{
            height: 1px;
            background: var(--border);
        }

        /* ===== Recent Transactions grid tidy ===== */
        .table-grid{
            grid-template-columns: 36px 44px 44px 88px minmax(240px, 1fr) 140px 140px 120px 160px 140px 96px;
            gap: 12px;
            padding: 16px 28px;
        }
        .tx-desc, .tx-person, .tx-receipt{
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .tx-receipt{ text-align: left; }
        /* Add breathing room between Amount and Date columns */
        .tx-amount{ padding-right: 10px; }
        .tx-datetime{ padding-left: 16px; }
        .tx-action{ width: 100%; text-align: center; }
        .table-header > div{
            white-space: nowrap;
        }
        .table-header > div:nth-child(9){ padding-left: 16px; }


.tx-by{font-size:11px;color:#6b7280;margin-top:2px;}

        /* ===== Invite banner (team tip) ===== */
        .invite-banner{
            display:flex;
            align-items:center;
            justify-content:space-between;
            gap:16px;
            padding:16px 18px;
            border:2px dashed rgba(99,102,241,0.25);
            background: rgba(99,102,241,0.06);
            border-radius: 16px;
            margin: 14px 0 18px 0;
        }
        .invite-banner-left{
            display:flex;
            align-items:flex-start;
            gap:12px;
            min-width: 0;
        }
        .invite-banner-icon{
            width:28px;
            height:28px;
            display:flex;
            align-items:center;
            justify-content:center;
            color: rgba(5,150,105,0.95);
            flex: 0 0 auto;
            margin-top:2px;
        }
        .invite-banner-title{
            font-weight: 800;
            font-size: 16px;
            color: var(--text);
            margin: 0;
            line-height: 1.2;
        }
        .invite-banner-text{
            margin: 2px 0 0 0;
            color: rgba(15,23,42,0.75);
            font-size: 14px;
            line-height: 1.35;
        }
        .invite-banner-actions{
            display:flex;
            align-items:center;
            gap:10px;
            flex: 0 0 auto;
        }
        .invite-btn{
            border: 1px solid rgba(99,102,241,0.25);
            background: rgba(99,102,241,0.12);
            color: var(--text);
            padding: 10px 14px;
            border-radius: 14px;
            font-weight: 700;
            cursor: pointer;
            white-space: nowrap;
        }
        .dismiss-btn{
            border: 1px solid rgba(15,23,42,0.12);
            background: rgba(255,255,255,0.9);
            color: var(--text);
            padding: 10px 14px;
            border-radius: 14px;
            font-weight: 700;
            cursor: pointer;
            white-space: nowrap;
        }
        .invite-btn:hover{ filter: brightness(0.98); }
        .dismiss-btn:hover{ filter: brightness(0.98); }

        .tx-createdby{ font-weight:700; color: rgba(15,23,42,0.75); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* --- FIX: Filters wrap into two rows (no overflow) --- */
.filters-row, .filters-grid, .filters-container {
  display: flex !important;
  flex-wrap: wrap !important;
  gap: 10px !important;
}
.filters-row > *, .filters-grid > *, .filters-container > * {
  flex: 1 1 220px !important;
  min-width: 220px !important;
}
@media (min-width: 1100px) {
  .filters-row > *, .filters-grid > *, .filters-container > * {
    flex: 1 1 calc(50% - 10px) !important;
    min-width: 260px !important;
  }
}
/* Ensure filter dropdown panel fits viewport */
.filters-dropdown, .filters-menu, .filter-dropdown-panel {
  max-width: min(920px, 95vw) !important;
  width: auto !important;
}


/* --- FIX: Transactions table fits screen (no horizontal scroll) --- */
.transactions-table, table.transactions-table, .table-transactions {
  width: 100% !important;
  table-layout: fixed !important;
}
.transactions-table th, .transactions-table td,
table.transactions-table th, table.transactions-table td,
.table-transactions th, .table-transactions td {
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
}
/* Narrower "Name/Description" style columns */
.transactions-table .col-name, .transactions-table .col-vendor, .transactions-table .col-desc,
.table-transactions .col-name, .table-transactions .col-vendor, .table-transactions .col-desc {
  width: 22% !important;
}
/* Standard widths for other columns */
.transactions-table .col-date, .table-transactions .col-date { width: 12% !important; }
.transactions-table .col-amount, .table-transactions .col-amount { width: 12% !important; text-align: right !important; }
.transactions-table .col-category, .table-transactions .col-category { width: 14% !important; }
.transactions-table .col-register, .table-transactions .col-register { width: 16% !important; }
.transactions-table .col-createdby, .table-transactions .col-createdby { width: 14% !important; }


/* Remove forced horizontal scroll on table wrappers */
.table-responsive, .transactions-table-wrap, .table-wrap {
  overflow-x: visible !important;
}


/* === v23 FIXES === */

/* 1) Kill horizontal scrolling for the transactions table area */
.table-responsive,
.transactions-table-wrap,
.table-wrap,
.table-container,
.recent-transactions .table-responsive,
.recent-transactions .transactions-table-wrap,
.recent-transactions .table-wrap {
  overflow-x: hidden !important;
}

/* Make sure the table can actually fit */
.transactions-table,
table.transactions-table,
.table-transactions,
.recent-transactions table {
  width: 100% !important;
  table-layout: fixed !important;
}

/* Tighter table density */
.transactions-table th,
.transactions-table td,
table.transactions-table th,
table.transactions-table td,
.table-transactions th,
.table-transactions td,
.recent-transactions table th,
.recent-transactions table td {
  padding: 10px 8px !important;
  font-size: 14px !important;
}

/* Default: no-nowrap only where needed; allow wrap on text-heavy columns */
.transactions-table th,
.transactions-table td,
table.transactions-table th,
table.transactions-table td,
.table-transactions th,
.table-transactions td,
.recent-transactions table th,
.recent-transactions table td {
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
}

/* Allow wrapping on description + date/time so we don't force width */
.transactions-table .col-desc,
.table-transactions .col-desc,
.recent-transactions .col-desc,
.transactions-table .col-date,
.table-transactions .col-date,
.recent-transactions .col-date {
  white-space: normal !important;
  line-height: 1.2 !important;
}

/* Column width map (tuned to avoid horizontal scroll) */
.transactions-table .col-check,
.table-transactions .col-check,
.recent-transactions .col-check { width: 4% !important; }

.transactions-table .col-idx,
.table-transactions .col-idx,
.recent-transactions .col-idx { width: 4% !important; }

.transactions-table .col-type,
.table-transactions .col-type,
.recent-transactions .col-type { width: 6% !important; }

.transactions-table .col-receipt,
.table-transactions .col-receipt,
.recent-transactions .col-receipt { width: 8% !important; }

.transactions-table .col-desc,
.table-transactions .col-desc,
.recent-transactions .col-desc { width: 22% !important; }

.transactions-table .col-from,
.table-transactions .col-from,
.recent-transactions .col-from { width: 12% !important; }

.transactions-table .col-to,
.table-transactions .col-to,
.recent-transactions .col-to { width: 12% !important; }

.transactions-table .col-amount,
.table-transactions .col-amount,
.recent-transactions .col-amount { width: 10% !important; text-align: right !important; }

.transactions-table .col-date,
.table-transactions .col-date,
.recent-transactions .col-date { width: 14% !important; }

.transactions-table .col-createdby,
.table-transactions .col-createdby,
.recent-transactions .col-createdby { width: 10% !important; }

.transactions-table .col-action,
.table-transactions .col-action,
.recent-transactions .col-action { width: 8% !important; }

/* If there is any leftover forced scrollbar, hide it (last resort) */
.recent-transactions,
.recent-transactions .card,
.recent-transactions .card-body {
  overflow-x: hidden !important;
}

/* 2) Remove hover-only "category" labels/tags/badges on rows (not used in Spendnote) */
.category,
.category-tag,
.category-badge,
.row-category,
.badge-category,
.tag-category,
.hover-category,
[class*="categoryTag"],
[class*="category-tag"],
[class*="category_badge"],
[data-category],
[data-category-tag] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}

/* If they are shown only on hover, ensure hover doesn't reveal anything */
tr:hover .category,
tr:hover .category-tag,
tr:hover .category-badge,
tr:hover .row-category,
tr:hover [data-category],
tr:hover [data-category-tag] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}


/* === v24 FIXES: no horizontal scroll + proper row selection + remove hover category labels === */

/* Hide any remaining tooltip UI */
.row-tooltip { display: none !important; }

/* Make transaction rows fit the card without horizontal scroll */
.table-grid {
  /* tighter row */
  gap: 12px !important;
  padding: 16px 20px !important;

  /* NEW: 11 columns incl. Created by + Action, tuned to fit typical desktop widths */
  grid-template-columns:
    32px   /* checkbox */
    34px   /* # */
    44px   /* type icon */
    72px   /* receipt */
    minmax(160px, 1.35fr)  /* description */
    minmax(110px, 0.95fr)  /* from */
    minmax(110px, 0.95fr)  /* to */
    90px   /* amount */
    120px  /* date & time */
    110px  /* created by */
    86px;  /* action */
}

/* If viewport is narrower, squeeze a bit more */
@media (max-width: 1200px) {
  .table-grid {
    gap: 10px !important;
    padding: 14px 16px !important;
    grid-template-columns:
      30px 32px 42px 64px minmax(140px, 1.4fr) minmax(95px, 0.9fr) minmax(95px, 0.9fr) 84px 112px 96px 78px;
  }
}

/* Ensure the container never shows a horizontal scrollbar */
.recent-transactions,
.table-container,
.table-wrap,
.transactions-table-wrap {
  overflow-x: hidden !important;
}

/* Proper selected-row styling that spans full width */
.table-grid.is-selected {
  background: rgba(var(--active-rgb), 0.06) !important;
  box-shadow: inset 0 0 0 2px rgba(var(--active-rgb), 0.55) !important;
  border-radius: 12px;
}

/* Hook selection via focus too (keyboard) */
.table-grid:focus-within {
  outline: none;
  box-shadow: inset 0 0 0 2px rgba(var(--active-rgb), 0.35);
}

/* Created by typography: same visual weight as From/To, and short username */
.tx-createdby{
  font-size: 13px !important;
  font-weight: 600 !important;
  color: var(--text-muted) !important;
  text-transform: none !important;
}

/* Keep date/time readable but compact */
.tx-datetime .date { font-size: 13px !important; }
.tx-datetime .time { font-size: 12px !important; }

/* Action button must not overflow */
.tx-action{
  width: 100% !important;
  min-width: 0 !important;
  padding: 10px 12px !important;
  font-size: 13px !important;
  white-space: nowrap !important;
}


/* === v25 FIX: Filters panel layout (2-column grid, no overflow) === */
.filter-panel-wrapper { 
  max-width: min(960px, 95vw) !important;
  width: auto !important;
}
.filter-panel {
  max-width: min(960px, 95vw) !important;
  width: auto !important;
  overflow-x: hidden !important;
}
/* Force filters into two columns on desktop, one on mobile */
.filter-grid {
  display: grid !important;
  grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
  gap: 14px !important;
  align-items: start !important;
}
@media (max-width: 820px) {
  .filter-grid { grid-template-columns: 1fr !important; }
}
/* Amount range: keep inputs inside the card, allow shrink */
.amount-range {
  display: grid !important;
  grid-template-columns: 1fr auto 1fr !important;
  gap: 8px !important;
  align-items: center !important;
}
.amount-range .filter-input { min-width: 0 !important; width: 100% !important; }
/* Ensure filter groups don't force min widths */
.filter-group { min-width: 0 !important; }
.filter-input { min-width: 0 !important; }


/* === v26 TWEAK: Filters in TWO ROWS (3 columns) === */
.filter-grid{
  grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
}
@media (max-width: 1100px){
  .filter-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
}
@media (max-width: 820px){
  .filter-grid{ grid-template-columns: 1fr !important; }
}

/* ===== MODAL ===== */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    z-index: 9999;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 20px;
    overflow-y: auto;
}

.modal-overlay.active {
    display: flex;
}

.modal-container {
    background: var(--surface);
    border-radius: 24px;
    max-width: 800px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    position: relative;
    margin: auto;
}

.modal-header {
    position: sticky;
    top: 0;
    background: linear-gradient(135deg, rgba(var(--active-rgb), 0.1), rgba(var(--active-rgb), 0.05));
    padding: 24px 32px;
    border-bottom: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: 24px 24px 0 0;
    z-index: 10;
}

.modal-title {
    font-size: 24px;
    font-weight: 800;
    color: var(--active);
    margin: 0;
}

.modal-close {
    width: 36px;
    height: 36px;
    border: none;
    background: rgba(0, 0, 0, 0.05);
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    color: var(--text-muted);
}

.modal-close:hover {
    background: rgba(0, 0, 0, 0.1);
    color: var(--text);
    transform: rotate(90deg);
}

.modal-body {
    padding: 32px;
}

.modal-info-bar {
    display: flex;
    gap: 24px;
    padding: 16px 20px;
    background: var(--bg);
    border-radius: 12px;
    margin-bottom: 24px;
    flex-wrap: wrap;
}

.modal-info-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
}

.modal-info-label {
    color: var(--text-muted);
    font-weight: 500;
}

.modal-info-value {
    color: var(--text);
    font-weight: 700;
}

.modal-info-select {
    border: none;
    background: transparent;
    font-weight: 700;
    color: var(--active);
    cursor: pointer;
    font-family: inherit;
    font-size: 14px;
}

.modal-info-select:focus {
    outline: 2px solid var(--active);
    outline-offset: 2px;
    border-radius: 4px;
}

@media (max-width: 640px) {
    .modal-container {
        max-height: 95vh;
        border-radius: 16px;
    }
    
    .modal-header {
        padding: 20px 24px;
        border-radius: 16px 16px 0 0;
    }
    
    .modal-title {
        font-size: 20px;
    }
    
    .modal-body {
        padding: 24px;
    }
}

/* ===== FORM STYLES FOR MODAL ===== */
.form-group {
    margin-bottom: 24px;
}

.form-label {
    display: block;
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 8px;
}

.form-label .required {
    color: var(--error);
}

.form-input,
.form-select,
.form-textarea {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--border);
    border-radius: 12px;
    font-size: 15px;
    font-family: inherit;
    transition: all 0.2s;
    background: var(--surface);
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 4px rgba(5, 150, 105, 0.1);
}

.form-textarea {
    resize: vertical;
    min-height: 80px;
}

.form-hint {
    font-size: 13px;
    color: var(--text-muted);
    margin-top: 6px;
}

.input-with-button {
    display: flex;
    gap: 8px;
    align-items: flex-start;
}

.input-with-button .form-input {
    flex: 1;
}

.add-detail-btn {
    width: 44px;
    height: 44px;
    border: 2px solid var(--border);
    background: var(--surface);
    border-radius: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    color: var(--text-muted);
    flex-shrink: 0;
}

.add-detail-btn:hover {
    border-color: var(--primary);
    color: var(--primary);
    background: rgba(5, 150, 105, 0.05);
}

.add-detail-btn.active {
    border-color: var(--primary);
    color: var(--primary);
    background: rgba(5, 150, 105, 0.1);
}

.expanded-fields {
    display: none;
    margin-top: 12px;
    padding: 16px;
    background: var(--bg);
    border-radius: 12px;
    border: 1px solid var(--border);
}

.expanded-fields.show {
    display: block;
}

.expanded-field {
    margin-bottom: 16px;
}

.expanded-field:last-child {
    margin-bottom: 0;
}

.expanded-field label {
    display: block;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-muted);
    margin-bottom: 6px;
}

.direction-toggle {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.direction-option {
    position: relative;
}

.direction-option input[type="radio"] {
    position: absolute;
    opacity: 0;
    pointer-events: none;
}

.direction-label {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px 16px;
    border: 2px solid var(--border);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s;
    background: var(--surface);
    text-align: center;
}

.direction-icon {
    font-size: 16px;
    color: var(--text-muted);
    transition: all 0.2s;
}

.direction-text {
    font-size: 14px;
    font-weight: 700;
    color: var(--text);
}

.direction-option:has(#modalDirectionIn) input:checked + .direction-label {
    border-color: var(--primary);
    background: var(--primary);
}

.direction-option:has(#modalDirectionIn) input:checked + .direction-label .direction-icon,
.direction-option:has(#modalDirectionIn) input:checked + .direction-label .direction-text {
    color: white;
}

.direction-option:has(#modalDirectionOut) input:checked + .direction-label {
    border-color: #f59e0b;
    background: #f59e0b;
}

.direction-option:has(#modalDirectionOut) input:checked + .direction-label .direction-icon,
.direction-option:has(#modalDirectionOut) input:checked + .direction-label .direction-text {
    color: white;
}

.direction-label:hover {
    border-color: var(--text-muted);
}

.input-with-prefix {
    position: relative;
}

.input-prefix {
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-muted);
    font-weight: 700;
    font-size: 18px;
    pointer-events: none;
}

.input-with-prefix input {
    padding-left: 36px;
    font-size: 18px;
    font-weight: 600;
}

.line-items-container {
    margin-top: 12px;
}

.line-item {
    display: grid;
    grid-template-columns: 1fr auto auto;
    gap: 12px;
    align-items: center;
    margin-bottom: 12px;
}

.line-item-input {
    padding: 10px 12px;
    border: 1px solid var(--border);
    border-radius: 10px;
    font-size: 14px;
    font-family: inherit;
}

.line-item-amount {
    width: 120px;
}

.remove-item-btn {
    width: 36px;
    height: 36px;
    border: none;
    background: transparent;
    color: var(--text-muted);
    cursor: pointer;
    border-radius: 8px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.remove-item-btn:hover {
    background: rgba(239, 68, 68, 0.1);
    color: var(--error);
}

.add-line-item-btn {
    padding: 10px 16px;
    border: 2px dashed var(--border);
    background: transparent;
    border-radius: 10px;
    font-size: 14px;
    font-weight: 600;
    color: var(--text-muted);
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 8px;
    justify-content: center;
    width: 100%;
    font-family: inherit;
}

.add-line-item-btn:hover {
    border-color: var(--primary);
    color: var(--primary);
    background: rgba(5, 150, 105, 0.05);
}

.add-line-item-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.add-section-btn {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 16px;
    border: 2px dashed var(--border);
    background: transparent;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 600;
    color: var(--text-muted);
    cursor: pointer;
    transition: all 0.2s;
    width: 100%;
    font-family: inherit;
    margin-bottom: 16px;
}

.add-section-btn:hover {
    border-color: var(--primary);
    color: var(--primary);
    background: rgba(5, 150, 105, 0.05);
}

.add-section-btn.active {
    border-style: solid;
    border-color: var(--primary);
    color: var(--primary);
    background: rgba(5, 150, 105, 0.08);
}

.form-actions {
    display: flex;
    gap: 12px;
    margin-top: 32px;
    padding-top: 24px;
    border-top: 1px solid var(--border);
}

.btn {
    padding: 14px 24px;
    border-radius: 12px;
    font-weight: 700;
    font-size: 15px;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
    font-family: inherit;
    display: flex;
    align-items: center;
    gap: 8px;
    justify-content: center;
    flex: 1;
}

.btn-primary {
    background: var(--primary);
    color: white;
}

.btn-primary:hover {
    background: var(--primary-dark);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);
}

.btn-blue {
    background: #64748b;
    color: white;
}

.btn-blue:hover {
    background: #475569;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(100, 116, 139, 0.3);
}

.btn-tertiary {
    background: white;
    color: var(--text);
    border: 2px solid var(--border);
}

.btn-tertiary:hover {
    border-color: var(--text);
    background: var(--bg);
    transform: translateY(-1px);
}

.btn-tertiary i {
    color: #ef4444;
}

@media (max-width: 640px) {
    .direction-toggle {
        grid-template-columns: 1fr;
    }
    
    .form-actions {
        flex-direction: column;
    }
    
    .line-item {
        grid-template-columns: 1fr;
    }
    
    .line-item-amount {
        width: 100%;
    }
}

    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
</head>
<body>
<nav class="site-nav">
  <div class="nav-container">
            <a href="index.html" class="logo">
                <svg width="36" height="36" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 6 C10 4.89543 10.8954 4 12 4 L36 4 C37.1046 4 38 4.89543 38 6 L38 38 L36 40 L34 38 L32 40 L30 38 L28 40 L26 38 L24 40 L22 38 L20 40 L18 38 L16 40 L14 38 L12 40 L10 38 Z" fill="url(#nav-logo-gradient)"/>
                    <path d="M32 4 L38 10 L32 10 Z" fill="#000000" opacity="0.25"/>
                    <path d="M32 4 L32 10 L38 10" stroke="#047857" stroke-width="1.5" stroke-linejoin="round"/>
                    <line x1="14" y1="14" x2="30" y2="14" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.9"/>
                    <line x1="14" y1="19" x2="26" y2="19" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.8"/>
                    <line x1="14" y1="24" x2="30" y2="24" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.9"/>
                    <line x1="14" y1="29" x2="22" y2="29" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.7"/>
                    <path d="M10 36 L12 38 L14 36 L16 38 L18 36 L20 38 L22 36 L24 38 L26 36 L28 38 L30 36 L32 38 L34 36 L36 38 L38 36" stroke="#047857" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    <defs>
                        <linearGradient id="nav-logo-gradient" x1="24" y1="4" x2="24" y2="40" gradientUnits="userSpaceOnUse">
                            <stop offset="0%" stop-color="#059669"/>
                            <stop offset="100%" stop-color="#10b981"/>
                        </linearGradient>
                    </defs>
                </svg>
                <span style="font-weight: 900; font-size: 1.5rem; margin-left: 10px; color: #000000; letter-spacing: -0.02em;">SpendNote</span>
            </a>
            <ul class="nav-links">
                <li><a href="spendnote-dashboard.html" class="active">Dashboard</a></li>
                <li><a href="spendnote-register-list.html">Cash Registers</a></li>
                <li><a href="spendnote-transaction-history.html">Transactions</a></li>
                <li><a href="spendnote-receipt-list.html">Receipts</a></li>
                <li><a href="spendnote-user-settings.html">Settings</a></li>
                <li><a href="spendnote-login.html" class="btn btn-secondary">Log out</a></li>
            </ul>
        </div>
    </nav>

<div class="app-container">
    <main class="main-content">
            <!-- App topbar -->
            <section class="app-topbar">
<div class="context-row">
                <button class="add-transaction-btn" id="addTransactionBtn">
                    <div class="add-btn-icon">
                        <i class="fas fa-plus"></i>
                    </div>
                    <div class="add-btn-text">New Transaction</div>
                </button>

                <div class="context-pill">
                    <div class="context-badge">
                        <div class="context-dot"></div>
                        <div class="context-text" id="activeRegister">Main Office</div>
                    </div>
                    <div class="context-stats">
                        <div class="context-stat context-stat-balance">
                            <div class="tooltip">Current available balance</div>
                            <div class="context-stat-value" id="availableBalance">$12,480</div>
                            <div class="context-stat-label">Available</div>
                        </div>

                        <div class="context-stat">
                            <div class="tooltip"> $420 vs last week</div>
                            <div class="context-stat-value">
                                +$4.4k
                                <span class="context-stat-trend up"> 10%</span>
                            </div>
                            <div class="context-stat-label">Net Today</div>
                        </div>
                        <div class="context-stat">
                            <div class="tooltip">142 transactions</div>
                            <div class="context-stat-value">
                                $25.7k
                                <span class="context-stat-trend up"> 5%</span>
                            </div>
                            <div class="context-stat-label">Week In</div>
                        </div>
                        <div class="context-stat">
                            <div class="tooltip">78 transactions</div>
                            <div class="context-stat-value">
                                $11.2k
                                <span class="context-stat-trend down"> 3%</span>
                            </div>
                            <div class="context-stat-label">Week Out</div>
                        </div>
                        <div class="context-stat">
                            <div class="tooltip">Average: 20/day</div>
                            <div class="context-stat-value">142</div>
                            <div class="context-stat-label">Txns</div>
                        </div>
                    </div>
                </div>
            </div>
            </section>
            <!-- Tip: invite your team -->
            <div class="invite-banner" id="inviteBanner">
                <div class="invite-banner-left">
                    <div class="invite-banner-icon" aria-hidden="true">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="invite-banner-copy">
                        <p class="invite-banner-title">Tip: invite your team</p>
                        <p class="invite-banner-text">They can add receipts from their phones  youll see everything here instantly.</p>
                    </div>
                </div>
                <div class="invite-banner-actions">
                    <button class="invite-btn" type="button">Invite team</button>
                    <button class="dismiss-btn" type="button" onclick="document.getElementById('inviteBanner').style.display='none'">Dismiss</button>
                </div>
            </div>


            <!-- Cash Registers Carousel -->
            <div class="registers-carousel-section">
                <div class="carousel-header">
                    <h2 class="carousel-title">Cash Registers</h2>
                    <div class="carousel-subtitle">Switch registers fast, keep the balance in sight.</div>
                    <div class="carousel-nav">
                        <button class="carousel-arrow swiper-button-prev-custom" aria-label="Previous">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="carousel-arrow swiper-button-next-custom" aria-label="Next">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>

                <div class="swiper registers-swiper">
                    <div class="swiper-wrapper">
                        <!-- Slide 1 - Main Office (Green) -->
                        <div class="swiper-slide">
                            <div class="register-card active" data-name="Main Office" data-color="#059669" data-rgb="5, 150, 105" 
                                 role="button" tabindex="0">
                                <div class="register-top">
  <div class="register-header-left">
    <div class="register-icon small" style="background: linear-gradient(135deg, rgba(5, 150, 105, 0.1), rgba(5, 150, 105, 0.05)); color: #059669; border-color: rgba(5, 150, 105, 0.15);"><i class="fas fa-building"></i></div>
    <div class="register-info"><h3>Main Office</h3>
                                        <div class="register-id">CR-001</div></div>
  </div>
  <div class="register-actions">
    <button class="register-kebab" aria-label="Cash register menu" type="button">
      <i class="fas fa-ellipsis-h"></i>
    </button>
    <div class="register-menu" role="menu" aria-label="Cash register actions">
      <button class="menu-settings" type="button">
        <span>Settings</span>
        <i class="fas fa-cog"></i>
      </button>
      <div class="divider"></div>
      <button class="menu-delete danger" type="button">
        <span>Delete cash register</span>
        <i class="fas fa-trash"></i>
      </button>
    </div>
  </div>
</div>
                                <div class="register-balance">
                                    $18,500
                                    <span class="trend-indicator up">
                                        <i class="fas fa-arrow-up"></i>+12%
                                    </span>
                                </div>
                                <div class="register-stats">
                                    <div class="stat-item">
                                        <div class="tooltip">Average: $2,400/day this week</div>
                                        <div class="stat-label">Today In</div>
                                        <div class="stat-value in">+$7,200</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="tooltip">-15% vs yesterday</div>
                                        <div class="stat-label">Today Out</div>
                                        <div class="stat-value out">-$2,800</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Slide 2 - Event Fund (Orange) -->
                        <div class="swiper-slide">
                            <div class="register-card" data-name="Event Fund" data-color="#f59e0b" data-rgb="245, 158, 11"
                                 role="button" tabindex="0">
                                <div class="register-top">
  <div class="register-header-left">
    <div class="register-icon small" style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.05)); color: #f59e0b; border-color: rgba(245, 158, 11, 0.15);"><i class="fas fa-calendar-alt"></i></div>
    <div class="register-info"><h3>Event Fund</h3>
                                        <div class="register-id">CR-002</div></div>
  </div>
  <div class="register-actions">
    <button class="register-kebab" aria-label="Cash register menu" type="button">
      <i class="fas fa-ellipsis-h"></i>
    </button>
    <div class="register-menu" role="menu" aria-label="Cash register actions">
      <button class="menu-settings" type="button">
        <span>Settings</span>
        <i class="fas fa-cog"></i>
      </button>
      <div class="divider"></div>
      <button class="menu-delete danger" type="button">
        <span>Delete cash register</span>
        <i class="fas fa-trash"></i>
      </button>
    </div>
  </div>
</div>
                                <div class="register-balance">
                                    $4,750
                                    <span class="trend-indicator up">
                                        <i class="fas fa-arrow-up"></i>+8%
                                    </span>
                                </div>
                                <div class="register-stats">
                                    <div class="stat-item">
                                        <div class="tooltip">2 events pending</div>
                                        <div class="stat-label">Today In</div>
                                        <div class="stat-value in">+$1,200</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="tooltip">Catering & supplies</div>
                                        <div class="stat-label">Today Out</div>
                                        <div class="stat-value out">-$650</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Slide 3 - Petty Cash (Blue) -->
                        <div class="swiper-slide">
                            <div class="register-card" data-name="Petty Cash" data-color="#3b82f6" data-rgb="59, 130, 246"
                                 role="button" tabindex="0">
                                <div class="register-top">
  <div class="register-header-left">
    <div class="register-icon small" style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(59, 130, 246, 0.05)); color: #3b82f6; border-color: rgba(59, 130, 246, 0.15);"><i class="fas fa-wallet"></i></div>
    <div class="register-info"><h3>Petty Cash</h3>
                                        <div class="register-id">CR-003</div></div>
  </div>
  <div class="register-actions">
    <button class="register-kebab" aria-label="Cash register menu" type="button">
      <i class="fas fa-ellipsis-h"></i>
    </button>
    <div class="register-menu" role="menu" aria-label="Cash register actions">
      <button class="menu-settings" type="button">
        <span>Settings</span>
        <i class="fas fa-cog"></i>
      </button>
      <div class="divider"></div>
      <button class="menu-delete danger" type="button">
        <span>Delete cash register</span>
        <i class="fas fa-trash"></i>
      </button>
    </div>
  </div>
</div>
                                <div class="register-balance">
                                    $2,000
                                    <span class="trend-indicator down">
                                        <i class="fas fa-arrow-down"></i>-5%
                                    </span>
                                </div>
                                <div class="register-stats">
                                    <div class="stat-item">
                                        <div class="tooltip">No deposits today</div>
                                        <div class="stat-label">Today In</div>
                                        <div class="stat-value in">+$0</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="tooltip">Office snacks & misc</div>
                                        <div class="stat-label">Today Out</div>
                                        <div class="stat-value out">-$300</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Slide 4 - Marketing Budget (Purple) -->
                        <div class="swiper-slide">
                            <div class="register-card" data-name="Marketing Budget" data-color="#8b5cf6" data-rgb="139, 92, 246"
                                 role="button" tabindex="0">
                                <div class="register-top">
  <div class="register-header-left">
    <div class="register-icon small" style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(139, 92, 246, 0.05)); color: #8b5cf6; border-color: rgba(139, 92, 246, 0.15);"><i class="fas fa-bullhorn"></i></div>
    <div class="register-info"><h3>Marketing Budget</h3>
                                        <div class="register-id">CR-004</div></div>
  </div>
  <div class="register-actions">
    <button class="register-kebab" aria-label="Cash register menu" type="button">
      <i class="fas fa-ellipsis-h"></i>
    </button>
    <div class="register-menu" role="menu" aria-label="Cash register actions">
      <button class="menu-settings" type="button">
        <span>Settings</span>
        <i class="fas fa-cog"></i>
      </button>
      <div class="divider"></div>
      <button class="menu-delete danger" type="button">
        <span>Delete cash register</span>
        <i class="fas fa-trash"></i>
      </button>
    </div>
  </div>
</div>
                                <div class="register-balance">
                                    $12,300
                                    <span class="trend-indicator up">
                                        <i class="fas fa-arrow-up"></i>+25%
                                    </span>
                                </div>
                                <div class="register-stats">
                                    <div class="stat-item">
                                        <div class="tooltip">Campaign budget increase</div>
                                        <div class="stat-label">Today In</div>
                                        <div class="stat-value in">+$5,000</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="tooltip">Ad spend & promotions</div>
                                        <div class="stat-label">Today Out</div>
                                        <div class="stat-value out">-$1,800</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Slide 5 - Emergency Fund (Red) -->
                        <div class="swiper-slide">
                            <div class="register-card" data-name="Emergency Fund" data-color="#ef4444" data-rgb="239, 68, 68"
                                 role="button" tabindex="0">
                                <div class="register-top">
  <div class="register-header-left">
    <div class="register-icon small" style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(239, 68, 68, 0.05)); color: #ef4444; border-color: rgba(239, 68, 68, 0.15);"><i class="fas fa-exclamation-triangle"></i></div>
    <div class="register-info"><h3>Emergency Fund</h3>
                                        <div class="register-id">CR-005</div></div>
  </div>
  <div class="register-actions">
    <button class="register-kebab" aria-label="Cash register menu" type="button">
      <i class="fas fa-ellipsis-h"></i>
    </button>
    <div class="register-menu" role="menu" aria-label="Cash register actions">
      <button class="menu-settings" type="button">
        <span>Settings</span>
        <i class="fas fa-cog"></i>
      </button>
      <div class="divider"></div>
      <button class="menu-delete danger" type="button">
        <span>Delete cash register</span>
        <i class="fas fa-trash"></i>
      </button>
    </div>
  </div>
</div>
                                <div class="register-balance">
                                    $8,900
                                    <span class="trend-indicator neutral">
                                        <i class="fas fa-minus"></i>0%
                                    </span>
                                </div>
                                <div class="register-stats">
                                    <div class="stat-item">
                                        <div class="tooltip">No activity</div>
                                        <div class="stat-label">Today In</div>
                                        <div class="stat-value in">+$0</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="tooltip">No activity</div>
                                        <div class="stat-label">Today Out</div>
                                        <div class="stat-value out">-$0</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Slide 6 - Add New Cash Register -->
                        <div class="swiper-slide">
                            <div class="register-card add-new-register-card" role="button" tabindex="0">
                                <div class="register-top">
                                    <div class="register-info">
                                        <h3>Add New</h3>
                                        <div class="register-id">Create</div>
                                    </div>
                                    <div class="register-icon add-icon">
                                        <i class="fas fa-plus"></i>
                                    </div>
                                </div>
                                <div class="add-register-message">
                                    <p>Create a new cash register to track your transactions</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End of swiper-wrapper -->
                    
                    <!-- Pagination -->
                    <div class="swiper-pagination"></div>
                </div>
                <!-- End of registers-swiper -->

            </div>
            <!-- End of registers-carousel-section -->

            <div class="transactions-card">
                <div class="transactions-header">
                    <div class="header-top">
                        <h2 class="transactions-title">Recent Transactions</h2>
                        <div class="header-actions">
                            <button class="filter-toggle-btn" id="filterToggle">
                                <i class="fas fa-sliders-h"></i>
                                Filters
                            </button>
                            <button class="export-btn">
                                <i class="fas fa-download"></i>
                                Export CSV
                            </button>
                            <div class="filter-tabs">
                                <button class="filter-tab active">All</button>
                                <button class="filter-tab">IN</button>
                                <button class="filter-tab">OUT</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="filter-panel-wrapper" id="filterPanel">
                    <div class="filter-panel">
                        <div class="filter-grid">
                            <div class="filter-group">
                                <label class="filter-label">
                                    <i class="fas fa-user"></i>
                                    Name / Person
                                </label>
                                <input type="text" class="filter-input" placeholder="Search by name..." id="filterName">
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">
                                    <i class="fas fa-file-alt"></i>
                                    Description
                                </label>
                                <input type="text" class="filter-input" placeholder="Search description..." id="filterDesc">
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">
                                    <i class="fas fa-user"></i>
                                    Created by
                                </label>
                                <input type="text" class="filter-input" placeholder="Search recorder..." id="filterCreatedBy">
                            </div>
                            <div class="filter-group">                             <label class="filter-label">
                                    <i class="fas fa-calendar"></i>
                                    Date From
                                </label>
                                <input type="date" class="filter-input" id="filterDateFrom">
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">
                                    <i class="fas fa-calendar"></i>
                                    Date To
                                </label>
                                <input type="date" class="filter-input" id="filterDateTo">
                            </div>
                            <div class="filter-group">
                                <label class="filter-label">
                                    <i class="fas fa-dollar-sign"></i>
                                    Amount Range
                                </label>
                                <div class="amount-range">
                                    <input type="number" class="filter-input" placeholder="Min" id="filterAmountMin">
                                    <span>-</span>
                                    <input type="number" class="filter-input" placeholder="Max" id="filterAmountMax">
                                </div>
                            </div>
                        </div>

                        <div class="filter-actions">
                            <button class="filter-btn clear" id="clearFilters">
                                <i class="fas fa-times"></i>
                                Clear
                            </button>
                            <button class="filter-btn primary" id="applyFilters">
                                <i class="fas fa-check"></i>
                                Apply Filters
                            </button>
                        </div>
                    </div>
                </div>

                <div class="bulk-actions" id="bulkActions">
                    <input type="checkbox" class="row-checkbox" id="selectAll">
                    <span class="bulk-actions-text"><span id="selectedCount">0</span> selected</span>
                    <button class="bulk-action-btn">
                        <i class="fas fa-print"></i> Print Selected
                    </button>
                    <button class="bulk-action-btn delete">
                        <i class="fas fa-trash"></i> Delete Selected
                    </button>
                </div>

                <div class="table-wrapper" id="tableWrapper">
                    <div class="table-grid table-header">
                        <div></div>
                        <div>#</div>
                        <div>Type</div>
                        <div>Receipt</div>
                        <div>Description</div>
                        <div>From</div>
                        <div>To</div>
                        <div>Amount</div>
                        <div>Date & Time</div>
                        <div>Created by</div>
                        <div>Action</div>
                    </div>

                    <div class="table-grid" tabindex="0">
                        <input type="checkbox" class="row-checkbox tx-checkbox">
                        <div class="tx-number">1</div>
                        <div class="tx-icon in"><i class="fas fa-arrow-up"></i></div>
                        <div class="tx-receipt">#1047</div>
                        <div class="tx-desc">Retail cash deposit</div>
                        <div class="tx-person">John Smith</div>
                        <div class="tx-person">Main Office</div>
                        <div class="tx-amount in">+$5,000</div>
                        <div class="tx-datetime">
                            <span class="date">Jan 3, 2026</span>
                            <span class="time">2:34 PM</span>
                        </div>
                        <div class="tx-createdby">by Alexa</div>
                        <button class="tx-action">Receipt</button>
</div>
                    <div class="table-grid" tabindex="0">
                        <input type="checkbox" class="row-checkbox tx-checkbox">
                        <div class="tx-number">2</div>
                        <div class="tx-icon out"><i class="fas fa-arrow-down"></i></div>
                        <div class="tx-receipt">#1046</div>
                        <div class="tx-desc">Office supplies</div>
                        <div class="tx-person">Main Office</div>
                        <div class="tx-person">ABC Supplies</div>
                        <div class="tx-amount out">-$450</div>
                        <div class="tx-datetime">
                            <span class="date">Jan 2, 2026</span>
                            <span class="time">9:15 AM</span>
                        </div>
                        <div class="tx-createdby">by Mia</div>
                        <button class="tx-action">Receipt</button>
</div>
                    <div class="table-grid" tabindex="0">
                        <input type="checkbox" class="row-checkbox tx-checkbox">
                        <div class="tx-number">3</div>
                        <div class="tx-icon in"><i class="fas fa-arrow-up"></i></div>
                        <div class="tx-receipt">#1045</div>
                        <div class="tx-desc">Customer payment</div>
                        <div class="tx-person">Mary Johnson</div>
                        <div class="tx-person">Main Office</div>
                        <div class="tx-amount in">+$2,200</div>
                        <div class="tx-datetime">
                            <span class="date">Jan 1, 2026</span>
                            <span class="time">4:20 PM</span>
                        </div>
                        <div class="tx-createdby">by Ethan</div>
                        <button class="tx-action">Receipt</button>
</div>
                    <div class="table-grid" tabindex="0">
                        <input type="checkbox" class="row-checkbox tx-checkbox">
                        <div class="tx-number">4</div>
                        <div class="tx-icon out"><i class="fas fa-arrow-down"></i></div>
                        <div class="tx-receipt">#1044</div>
                        <div class="tx-desc">Marketing campaign</div>
                        <div class="tx-person">Main Office</div>
                        <div class="tx-person">AdCorp Media</div>
                        <div class="tx-amount out">-$1,800</div>
                        <div class="tx-datetime">
                            <span class="date">Dec 31, 2025</span>
                            <span class="time">11:45 AM</span>
                        </div>
                        <div class="tx-createdby">by Sofia</div>
                        <button class="tx-action">Receipt</button>
</div>
                    <div class="table-grid" tabindex="0">
                        <input type="checkbox" class="row-checkbox tx-checkbox">
                        <div class="tx-number">5</div>
                        <div class="tx-icon in"><i class="fas fa-arrow-up"></i></div>
                        <div class="tx-receipt">#1043</div>
                        <div class="tx-desc">Product sales</div>
                        <div class="tx-person">Sarah Williams</div>
                        <div class="tx-person">Main Office</div>
                        <div class="tx-amount in">+$3,450</div>
                        <div class="tx-datetime">
                            <span class="date">Dec 30, 2025</span>
                            <span class="time">3:10 PM</span>
                        </div>
                        <div class="tx-createdby">by Liam</div>
                        <button class="tx-action">Receipt</button>
</div>
                    <div class="table-grid" tabindex="0">
                        <input type="checkbox" class="row-checkbox tx-checkbox">
                        <div class="tx-number">6</div>
                        <div class="tx-icon out"><i class="fas fa-arrow-down"></i></div>
                        <div class="tx-receipt">#1042</div>
                        <div class="tx-desc">Employee salary</div>
                        <div class="tx-person">Main Office</div>
                        <div class="tx-person">David Chen</div>
                        <div class="tx-amount out">-$4,200</div>
                        <div class="tx-datetime">
                            <span class="date">Dec 29, 2025</span>
                            <span class="time">8:00 AM</span>
                        </div>
                        <div class="tx-createdby">by Noah</div>
                        <button class="tx-action">Receipt</button>
</div>
                </div>
            </div>
        </main>
    </div>

    <!-- CREATE TRANSACTION MODAL -->
    <div class="modal-overlay" id="createTransactionModal">
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title">Create Transaction</h2>
                <button class="modal-close" id="closeModalBtn" type="button" aria-label="Close modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- INFO BAR -->
                <div class="modal-info-bar">
                    <div class="modal-info-item">
                        <i class="fas fa-user" style="color: var(--active);"></i>
                        <span class="modal-info-label">Logged by:</span>
                        <span class="modal-info-value">John Doe</span>
                    </div>
                    <div class="modal-info-item">
                        <i class="fas fa-building" style="color: var(--active);"></i>
                        <span class="modal-info-label">Register:</span>
                        <select class="modal-info-select" id="modalRegister">
                            <option value="main" data-color="#059669" data-rgb="5, 150, 105">Main Office</option>
                            <option value="event" data-color="#f59e0b" data-rgb="245, 158, 11">Event Fund</option>
                            <option value="petty" data-color="#3b82f6" data-rgb="59, 130, 246">Petty Cash</option>
                        </select>
                    </div>
                </div>

                <form id="modalTransactionForm">
                    <!-- PARTNER NAME -->
                    <div class="form-group">
                        <label class="form-label">Partner name <span class="required">*</span></label>
                        <div class="input-with-button">
                            <input 
                                type="text" 
                                class="form-input" 
                                id="modalPartnerName"
                                placeholder="Enter partner name"
                                required
                            >
                            <button type="button" class="add-detail-btn" id="modalTogglePartnerDetails" title="Add partner details">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        
                        <!-- Expanded partner details -->
                        <div class="expanded-fields" id="modalPartnerDetailsFields">
                            <div class="expanded-field">
                                <label>Address</label>
                                <input 
                                    type="text" 
                                    class="form-input" 
                                    id="modalPartnerAddress"
                                    placeholder="Street, City, State, ZIP"
                                >
                            </div>
                            <div class="expanded-field">
                                <label>Partner ID</label>
                                <input 
                                    type="text" 
                                    class="form-input" 
                                    id="modalPartnerId"
                                    placeholder="Tax ID, Client ID, etc."
                                >
                            </div>
                        </div>
                    </div>

                    <!-- DIRECTION -->
                    <div class="form-group">
                        <label class="form-label">Transaction direction <span class="required">*</span></label>
                        <div class="direction-toggle">
                            <div class="direction-option">
                                <input type="radio" name="modalDirection" id="modalDirectionIn" value="in" checked>
                                <label for="modalDirectionIn" class="direction-label">
                                    <div class="direction-icon"></div>
                                    <div class="direction-text">IN (Received)</div>
                                </label>
                            </div>
                            <div class="direction-option">
                                <input type="radio" name="modalDirection" id="modalDirectionOut" value="out">
                                <label for="modalDirectionOut" class="direction-label">
                                    <div class="direction-icon"></div>
                                    <div class="direction-text">OUT (Paid)</div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- AMOUNT -->
                    <div class="form-group">
                        <label class="form-label">Amount <span class="required">*</span></label>
                        <div class="input-with-prefix">
                            <span class="input-prefix">$</span>
                            <input 
                                type="number" 
                                class="form-input" 
                                id="modalAmount"
                                placeholder="0.00"
                                step="0.01"
                                min="0"
                                required
                            >
                        </div>
                    </div>

                    <!-- LINE ITEMS -->
                    <div class="form-group">
                        <label class="form-label">Line items (optional)</label>
                        <div class="line-items-container" id="modalLineItemsContainer">
                            <!-- Line items will be added here -->
                        </div>
                        <button type="button" class="add-line-item-btn" id="modalAddLineItemBtn">
                            <i class="fas fa-plus"></i>
                            Add line item (max 5)
                        </button>
                    </div>

                    <!-- DATE -->
                    <div class="form-group">
                        <label class="form-label">Date <span class="required">*</span></label>
                        <input 
                            type="date" 
                            class="form-input" 
                            id="modalDate"
                            required
                        >
                    </div>

                    <!-- TRANSACTION ID (Optional button) -->
                    <button type="button" class="add-section-btn" id="modalToggleTransactionId">
                        <i class="fas fa-plus"></i>
                        <span>Add transaction ID (optional)</span>
                    </button>
                    <div class="form-group" id="modalTransactionIdGroup" style="display: none;">
                        <label class="form-label">Transaction ID</label>
                        <input 
                            type="text" 
                            class="form-input" 
                            id="modalTransactionId"
                            placeholder="PO#, Order#, Invoice#, etc."
                        >
                        <span class="form-hint">Purchase order, order number, invoice reference, etc.</span>
                    </div>

                    <!-- NOTE (Optional button) -->
                    <button type="button" class="add-section-btn" id="modalToggleNote">
                        <i class="fas fa-plus"></i>
                        <span>Add note (optional)</span>
                    </button>
                    <div class="form-group" id="modalNoteGroup" style="display: none;">
                        <label class="form-label">Note</label>
                        <textarea 
                            class="form-textarea" 
                            id="modalNote"
                            placeholder="Add any additional notes or comments"
                        ></textarea>
                    </div>

                    <!-- ACTIONS -->
                    <div class="form-actions">
                        <button type="submit" class="btn btn-blue" name="action" value="done">
                            <i class="fas fa-check"></i>
                            Done
                        </button>
                        <button type="submit" class="btn btn-primary" name="action" value="done-receipt">
                            <i class="fas fa-file-pdf"></i>
                            Done & Receipt
                        </button>
                        <button type="button" class="btn btn-tertiary" id="modalCancelBtn">
                            <i class="fas fa-times"></i>
                            Cancel
                        </button>
                    </div>
                    
                    <!-- Receipt Note -->
                    <div style="text-align: center; margin-top: 16px; font-size: 13px; color: var(--text-muted); font-style: italic;">
                        You can print a receipt now, or later from the transaction list.
                    </div>
                </form>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-brand">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 1rem;">
                    <svg width="32" height="32" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 6 C10 4.89543 10.8954 4 12 4 L36 4 C37.1046 4 38 4.89543 38 6 L38 38 L36 40 L34 38 L32 40 L30 38 L28 40 L26 38 L24 40 L22 38 L20 40 L18 38 L16 40 L14 38 L12 40 L10 38 Z" fill="url(#footer-logo-gradient)"/>
                        <path d="M32 4 L38 10 L32 10 Z" fill="#000000" opacity="0.25"/>
                        <path d="M32 4 L32 10 L38 10" stroke="#047857" stroke-width="1.5" stroke-linejoin="round"/>
                        <line x1="14" y1="14" x2="30" y2="14" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.9"/>
                        <line x1="14" y1="19" x2="26" y2="19" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.8"/>
                        <line x1="14" y1="24" x2="30" y2="24" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.9"/>
                        <line x1="14" y1="29" x2="22" y2="29" stroke="white" stroke-width="2.5" stroke-linecap="round" opacity="0.7"/>
                        <path d="M10 36 L12 38 L14 36 L16 38 L18 36 L20 38 L22 36 L24 38 L26 36 L28 38 L30 36 L32 38 L34 36 L36 38 L38 36" stroke="#047857" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                        <defs>
                            <linearGradient id="footer-logo-gradient" x1="24" y1="4" x2="24" y2="40" gradientUnits="userSpaceOnUse">
                                <stop offset="0%" stop-color="#059669"/>
                                <stop offset="100%" stop-color="#10b981"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <h3 style="margin: 0; font-size: 1.5rem; font-weight: 900; background: linear-gradient(135deg, #047857, #059669, #10b981); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">SpendNote</h3>
                </div>
                <p>Professional cash receipt management for modern teams. Simple, secure, and transparent.</p>
                
                <form class="newsletter-form">
                    <input type="email" placeholder="your@email.com" required>
                    <button type="submit">Subscribe</button>
                </form>
            </div>
            <div class="footer-links">
                <h4>Product</h4>
                <ul>
                    <li><a href="index.html#features">Features</a></li>
                    <li><a href="spendnote-pricing.html">Pricing</a></li>
                    <li><a href="spendnote-faq.html">FAQ</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h4>Company</h4>
                <ul>
                    <li><a href="spendnote-about.html">About</a></li>
                    <li><a href="spendnote-contact.html">Contact</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h4>Legal</h4>
                <ul>
                    <li><a href="spendnote-terms.html">Terms</a></li>
                    <li><a href="spendnote-privacy.html">Privacy</a></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div>
                <p>&copy; 2026 SpendNote. All rights reserved.</p>
                <p style="margin-top: 0.5rem;"><i class="fas fa-info-circle"></i> Proof of cash transfer only. Not a tax or accounting tool.</p>
            </div>
            <div class="footer-social">
                <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
            </div>
        </div>
    </footer>

    <script>
        // Register cards
        function updateActiveRegister(card) {
            const color = card.dataset.color;
            const rgb = card.dataset.rgb;
            const name = card.dataset.name;

            document.documentElement.style.setProperty('--active', color);
            document.documentElement.style.setProperty('--active-rgb', rgb);
            document.getElementById('activeRegister').textContent = name;
        }

        document.querySelectorAll('.register-card').forEach(card => {
            // Per-card color for calm visual coding
            card.style.setProperty('--card-color', card.dataset.color);
            card.style.setProperty('--card-rgb', card.dataset.rgb);

            card.addEventListener('click', () => {
                document.querySelectorAll('.register-card').forEach(c => c.classList.remove('active'));
                card.classList.add('active');
                updateActiveRegister(card);
            });

            card.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    card.click();
                }
            });
        });

        // Register kebab menus (prevent card click)
        function closeAllRegisterMenus() {
            document.querySelectorAll('.register-menu.open').forEach(m => m.classList.remove('open'));
        }

        document.querySelectorAll('.register-kebab').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                const card = btn.closest('.register-card');
                const menu = card ? card.querySelector('.register-menu') : null;
                if (!menu) return;
                const isOpen = menu.classList.contains('open');
                closeAllRegisterMenus();
                if (!isOpen) menu.classList.add('open');
            });

            btn.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    btn.click();
                }
            });
        });

        document.querySelectorAll('.register-menu').forEach(menu => {
            menu.addEventListener('click', (e) => e.stopPropagation());
        });

        document.querySelectorAll('.menu-settings').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                const card = btn.closest('.register-card');
                const name = card?.dataset?.name || 'this register';
                alert(`Open settings for ${name} (demo).`);
                closeAllRegisterMenus();
            });
        });

        document.querySelectorAll('.menu-delete').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                const card = btn.closest('.register-card');
                const name = card?.dataset?.name || 'this register';
                alert(`Delete ${name} (demo).`);
                closeAllRegisterMenus();
            });
        });

        document.addEventListener('click', closeAllRegisterMenus);
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeAllRegisterMenus();
        });


        // Filter toggle
        const filterToggle = document.getElementById('filterToggle');
        const filterPanel = document.getElementById('filterPanel');

        filterToggle.addEventListener('click', () => {
            filterPanel.classList.toggle('expanded');
            filterToggle.classList.toggle('active');
        });

        // Filter tabs
        document.querySelectorAll('.filter-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
            });
        });

        // Nav links
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', () => {
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                link.classList.add('active');
            });
        });

        // Bulk selection
        const selectAllCheckbox = document.getElementById('selectAll');
        const txCheckboxes = document.querySelectorAll('.tx-checkbox');
        
        // v24: toggle selected row styling
        function syncRowSelection() {
            txCheckboxes.forEach(cb => {
                const row = cb.closest('.table-grid');
                if (row) row.classList.toggle('is-selected', cb.checked);
            });
        }
const bulkActions = document.getElementById('bulkActions');
        const selectedCount = document.getElementById('selectedCount');

        function updateBulkActions() {
            const checkedCount = document.querySelectorAll('.tx-checkbox:checked').length;
            selectedCount.textContent = checkedCount;
            bulkActions.classList.toggle('active', checkedCount > 0);
            selectAllCheckbox.checked = checkedCount === txCheckboxes.length;
        
            syncRowSelection();
        }

        selectAllCheckbox.addEventListener('change', () => {
            txCheckboxes.forEach(cb => cb.checked = selectAllCheckbox.checked);
            updateBulkActions();
        });
        
        txCheckboxes.forEach(cb => {
            cb.addEventListener('change', () => {
                updateBulkActions();
                syncRowSelection();
            });
        });
syncRowSelection();

        txCheckboxes.forEach(cb => {
            cb.addEventListener('change', updateBulkActions);
        });

        // Export button
        document.querySelector('.export-btn').addEventListener('click', () => {
            alert('Exporting transactions to CSV...');
        });

        // Clear filters
        document.getElementById('clearFilters').addEventListener('click', () => {
            document.getElementById('filterName').value = '';
            document.getElementById('filterDesc').value = '';
            document.getElementById('filterDateFrom').value = '';
            document.getElementById('filterDateTo').value = '';
            document.getElementById('filterAmountMin').value = '';
            document.getElementById('filterAmountMax').value = '';
        });

        // Apply filters
        document.getElementById('applyFilters').addEventListener('click', () => {
            alert('Filters applied! (Demo mode)');
        });

        // Modal functionality
        const modal = document.getElementById('createTransactionModal');
        const openModalBtn = document.getElementById('addTransactionBtn');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const cancelModalBtn = document.getElementById('modalCancelBtn');

        // Open modal
        openModalBtn.addEventListener('click', () => {
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            // Set today's date
            document.getElementById('modalDate').valueAsDate = new Date();
        });

        // Close modal
        function closeModal() {
            modal.classList.remove('active');
            document.body.style.overflow = '';
            // Reset form
            document.getElementById('modalTransactionForm').reset();
            document.getElementById('modalPartnerDetailsFields').classList.remove('show');
            document.getElementById('modalTransactionIdGroup').style.display = 'none';
            document.getElementById('modalNoteGroup').style.display = 'none';
            document.getElementById('modalLineItemsContainer').innerHTML = '';
            modalLineItemCount = 0;
            updateModalLineItemsButton();
        }

        closeModalBtn.addEventListener('click', closeModal);
        cancelModalBtn.addEventListener('click', closeModal);

        // Close on overlay click
        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeModal();
        });

        // Close on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.classList.contains('active')) {
                closeModal();
            }
        });

        // Modal register change - update active color
        const modalRegisterSelect = document.getElementById('modalRegister');
        
        function updateModalRegisterColor() {
            const selectedOption = modalRegisterSelect.options[modalRegisterSelect.selectedIndex];
            const color = selectedOption.dataset.color;
            const rgb = selectedOption.dataset.rgb;
            
            if (color && rgb) {
                document.documentElement.style.setProperty('--active', color);
                document.documentElement.style.setProperty('--active-rgb', rgb);
            }
        }
        
        modalRegisterSelect.addEventListener('change', updateModalRegisterColor);

        // Toggle partner details
        document.getElementById('modalTogglePartnerDetails').addEventListener('click', function() {
            const fields = document.getElementById('modalPartnerDetailsFields');
            const isVisible = fields.classList.contains('show');
            
            if (isVisible) {
                fields.classList.remove('show');
                this.classList.remove('active');
                this.innerHTML = '<i class="fas fa-plus"></i>';
            } else {
                fields.classList.add('show');
                this.classList.add('active');
                this.innerHTML = '<i class="fas fa-minus"></i>';
            }
        });

        // Toggle transaction ID
        document.getElementById('modalToggleTransactionId').addEventListener('click', function() {
            const group = document.getElementById('modalTransactionIdGroup');
            const isVisible = group.style.display !== 'none';
            
            if (isVisible) {
                group.style.display = 'none';
                this.classList.remove('active');
                this.querySelector('i').className = 'fas fa-plus';
            } else {
                group.style.display = 'block';
                this.classList.add('active');
                this.querySelector('i').className = 'fas fa-minus';
            }
        });

        // Toggle note
        document.getElementById('modalToggleNote').addEventListener('click', function() {
            const group = document.getElementById('modalNoteGroup');
            const isVisible = group.style.display !== 'none';
            
            if (isVisible) {
                group.style.display = 'none';
                this.classList.remove('active');
                this.querySelector('i').className = 'fas fa-plus';
            } else {
                group.style.display = 'block';
                this.classList.add('active');
                this.querySelector('i').className = 'fas fa-minus';
            }
        });

        // Line items management
        let modalLineItemCount = 0;
        const maxModalLineItems = 5;
        const modalLineItemsContainer = document.getElementById('modalLineItemsContainer');
        const modalAddLineItemBtn = document.getElementById('modalAddLineItemBtn');

        modalAddLineItemBtn.addEventListener('click', () => {
            if (modalLineItemCount >= maxModalLineItems) return;
            
            modalLineItemCount++;
            const itemDiv = document.createElement('div');
            itemDiv.className = 'line-item';
            itemDiv.innerHTML = `
                <input 
                    type="text" 
                    class="line-item-input" 
                    placeholder="Item description"
                    data-item-index="${modalLineItemCount}"
                >
                <input 
                    type="number" 
                    class="line-item-input line-item-amount" 
                    placeholder="$0.00"
                    step="0.01"
                    min="0"
                    data-amount-index="${modalLineItemCount}"
                >
                <button type="button" class="remove-item-btn" data-remove-index="${modalLineItemCount}">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            modalLineItemsContainer.appendChild(itemDiv);
            
            // Remove button
            itemDiv.querySelector('.remove-item-btn').addEventListener('click', function() {
                itemDiv.remove();
                modalLineItemCount--;
                updateModalLineItemsButton();
            });
            
            updateModalLineItemsButton();
        });

        function updateModalLineItemsButton() {
            modalAddLineItemBtn.disabled = modalLineItemCount >= maxModalLineItems;
            modalAddLineItemBtn.innerHTML = `
                <i class="fas fa-plus"></i>
                Add line item (${modalLineItemCount}/${maxModalLineItems})
            `;
        }

        // Form submission
        document.getElementById('modalTransactionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const actionBtn = e.submitter;
            const action = actionBtn ? actionBtn.value : 'done';
            
            const formData = {
                register: document.getElementById('modalRegister').value,
                loggedBy: 'John Doe',
                partnerName: document.getElementById('modalPartnerName').value,
                partnerAddress: document.getElementById('modalPartnerAddress').value,
                partnerId: document.getElementById('modalPartnerId').value,
                direction: document.querySelector('input[name="modalDirection"]:checked').value,
                amount: document.getElementById('modalAmount').value,
                date: document.getElementById('modalDate').value,
                transactionId: document.getElementById('modalTransactionId').value,
                note: document.getElementById('modalNote').value,
                lineItems: []
            };

            // Collect line items
            document.querySelectorAll('#modalLineItemsContainer .line-item').forEach(item => {
                const desc = item.querySelector('[data-item-index]').value;
                const amt = item.querySelector('[data-amount-index]').value;
                if (desc || amt) {
                    formData.lineItems.push({ description: desc, amount: amt });
                }
            });

            console.log('Transaction data:', formData);
            console.log('Action:', action);
            
            if (action === 'done-receipt') {
                alert('Transaction saved!\n\nGenerating receipt PDF...\n\nIn production:\n- Save to database\n- Generate & download PDF\n- Update register balance');
            } else {
                alert('Transaction saved!\n\nIn production:\n- Save to database\n- Update register balance\n- Refresh dashboard');
            }
            
            closeModal();
        });

        const activeCard = document.querySelector('.register-card.active');
        if (activeCard) updateActiveRegister(activeCard);
    </script>

    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        // Initialize Swiper
        const registersSwiper = new Swiper('.registers-swiper', {
            slidesPerView: 1,
            spaceBetween: 20,
            loop: false,
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            navigation: {
                nextEl: '.swiper-button-next-custom',
                prevEl: '.swiper-button-prev-custom',
            },
            breakpoints: {
                640: {
                    slidesPerView: 2,
                    spaceBetween: 20,
                },
                1024: {
                    slidesPerView: 3,
                    spaceBetween: 24,
                },
            },
        });
    </script>

</body>
</html>